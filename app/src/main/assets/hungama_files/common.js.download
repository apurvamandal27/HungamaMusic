
// user arjun.patil
// created 12-04-2016

/*
 * Added by Neha & Farheen
 * array for search tab ids
 */
var tabIdArr = {
    "tab1": {
        "subType": '', "type": 'all'
    },
    "tab4": {
        "subType": 'audio_track', "type": 'music'
    },
    "tab5": {
        "subType": 'audio_album', "type": 'music'
    },
    "tab6": {
        "subType": 'playlist', "type": 'music'
    },
    "tab7": {
        "subType": 'radio', "type": 'music'
    },
    "tab8": {
        "subType": 'music_video_track', "type": 'videos'
    },
    "tab3": {
        "subType": '', "type": 'movies'
    },
    "tab2": {
        "subType": '', "type": 'artist'
    },
    "a-all": {
        "subType": '', "type": 'all'
    },
    "a-songs": {
        "subType": 'audio_track', "type": 'music'
    },
    "a-albums": {
        "subType": 'audio_album', "type": 'music'
    },
    "a-playlists": {
        "subType": '', "type": 'playlist'
    },
    "a-videos": {
        "subType": '', "type": 'videos'
    },
    "a-movies": {
        "subType": '', "type": 'movies'
    },
    "a-artists": {
        "subType": '', "type": 'artist'
    }
};
//array for search tab ids ends here

$(document).ready(function () {
	
    //load more ajax starts
    $(document).on('click', '.load_more_button', function (e) {
        e.preventDefault();
        var limit = (parseInt($("#r_limit").val()));
        var start = (parseInt($("#r_start").val()) + limit);
        $("#r_start").val(start);
        var page = $("#page").val();
        var method = $("#method").val();
        var site_url;
        var origin_url = $('#origin_url').val();
		if (hungamaGetCookie('_hcntr')) {
			country_code = hungamaGetCookie('_hcntr');
		} else {
			country_code = '';	
		}
        if (page == 'artist' || page == 'artist_details') {
            var role = $("#role").val();
            var id = $("#id").val();
            var method = $("#method").val();
            var type = $("#type").val();
            var subtype = $("#subtype").val();
            var title = $("#title").val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            site_url = gen_artist_urls({method: method, title: title, id: id, type: type, subtype: subtype, page_no: page_no});
        } else if (page == 'music') {
            var language = $("#language").val();
            var type = $("#type").val();
            var subtype = $("#subtype").val();
            var sortby = $("#sortby").val();
            var page_no = $("#page_no").val();
            var genre = $("#genre").val();
            page_no = (parseInt(page_no) + 1);
            //site_url = gen_music_urls({method:method, cnt_type:type,cnt_lang:language,cnt_subtype:subtype,cnt_sortby:sortby, page_no:page_no});
            site_url = gen_music_urls({method: method, cnt_type: type, cnt_lang: language, cnt_subtype: subtype, cnt_genre: genre, page_no: page_no});
        } else if (page == 'movie') {
            var language = $("#language").val();
            var type = $("#type").val();
            var subtype = $("#subtype").val();
            var sortby = $("#sortby").val();
            var page_no = $("#page_no").val();
            var genre = $("#genre").val();
            page_no = (parseInt(page_no) + 1);
            //site_url = gen_movie_urls({method:method, cnt_type:type,cnt_lang:language,cnt_genre:genre,cnt_subtype:subtype,cnt_sortby:sortby, page_no:page_no});
            site_url = gen_movie_urls({method: method, cnt_type: type, cnt_lang: language, cnt_genre: genre, page_no: page_no});
        } else if (page == 'video') {
            var lang = $("#language").val();
            var genre = $("#genre").val();
            var method = $("#method").val();
            var page_no = $("#page_no").val();
            var title = $("#title").val();
            var id = $("#id").val();
            page_no = (parseInt(page_no) + 1);
            if (method == 'music_videos') {
                site_url = createVideoListingUrl({method: method, cnt_lang: lang, cnt_genre: genre, page_no: page_no});
            } else if (method == 'explore') {
                site_url = createVideoListingUrl({method: method,cnt_id :id, cnt_title: title, page_no: page_no});
            } else {
                site_url = createVideoListingUrl({method: 'genre1', cnt_lang: lang, cnt_genre: genre, page_no: page_no});
            }
        } else if (page == 'search') {
            var tabId = $('.' + $('#currTab').val()).attr('class').split(' ')[0];
            var searchKeyword = $('#search_keyword').val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            site_url = gen_search_urls('viewSearchPage', '', '', tabIdArr[tabId]['subType'], searchKeyword, tabIdArr[tabId]['type'], page_no);
        } else if (page == 'music_videos') {
            var lang = $("#language").val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            site_url = createVideoListingUrl({method: 'music_videos', cnt_lang: lang, page_no: page_no});
        } else if (page == 'shortfilms') {
            var lang = $("#language").val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            site_url = createVideoListingUrl({method: 'shortfilmsListing', cnt_lang: lang, page_no: page_no});
        } else if (page == 'more') {
            var id = $("#id").val();
            var title = $("#title").val();
            var page_no = $("#page_no").val();
            var moretype = $("#moretype").val();
			var section_id = $("#section_id").val();
            page_no = (parseInt(page_no) + 1);
            site_url = gen_more_urls({method: 'more', id: id, title: title, moretype: moretype, page_no: page_no,section_id:section_id});
        } else if (page == 'html') {
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            site_url = gen_html_urls({method: 'winners', page_no: page_no});
        } else if (page == 'my_playlist') {
            var page_no = $("#page_no").val();
            var contenttype = $("#contenttype").val();
			if (hungamaGetCookie('h_profile')) {
				profile = JSON.parse(hungamaGetCookie('h_profile'));
				status = profile['status'];
				if(status==1){
					id = profile['userId'];
				}else{
					id = 0
				}
			}
            page_no = (parseInt(page_no) + 1);
            site_url = gen_user_urls({method: 'myPlaylist', contenttype: contenttype, page_no: page_no, user_id: id});
        } else if (page == 'my_followed_artist') {
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
			if (hungamaGetCookie('h_profile')) {
				profile = JSON.parse(hungamaGetCookie('h_profile'));
				status = profile['status'];
				if(status==1){
					id = profile['userId'];
				}else{
					id = 0
				}
			}
            site_url = gen_user_urls({method: 'myFollowedArtists', page_no: page_no, user_id: id});
        } else if (page == 'my_continue_watching') {
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            var contenttype = $("#contenttype").val();
			if (hungamaGetCookie('h_profile')) {
				profile = JSON.parse(hungamaGetCookie('h_profile'));
				status = profile['status'];
				if(status==1){
					id = profile['userId'];
				}else{
					id = 0
				}
			}
            site_url = gen_user_urls({method: 'myContinueWatching', contenttype: contenttype, page_no: page_no, user_id: id});
        } else if (page == 'my_favourites') {
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            var contenttype = $("#contenttype").val();
			if (hungamaGetCookie('h_profile')) {
				profile = JSON.parse(hungamaGetCookie('h_profile'));
				status = profile['status'];
				if(status==1){
					id = profile['userId'];
				}else{
					id = 0
				}
			}
            site_url = gen_user_urls({method: 'myFavourites', contenttype: contenttype, page_no: page_no, user_id: id});
        } else if (page == 'my_downloads') {
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            var contenttype = $("#contenttype").val();
			if (hungamaGetCookie('h_profile')) {
				profile = JSON.parse(hungamaGetCookie('h_profile'));
				status = profile['status'];
				if(status==1){
					id = profile['userId'];
				}else{
					id = 0
				}
			}
            site_url = gen_user_urls({method: 'user_downloads', contenttype: contenttype, page_no: page_no, user_id: id});
        } else if (page == 'my_watchlist') {
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) + 1);
            var contenttype = $("#contenttype").val();
			if (hungamaGetCookie('h_profile')) {
				profile = JSON.parse(hungamaGetCookie('h_profile'));
				status = profile['status'];
				if(status==1){
					id = profile['userId'];
				}else{
					id = 0
				}
			}
            site_url = gen_user_urls({method: 'myWatchlist', contenttype: contenttype, page_no: page_no, user_id: id});
        }
        // comment by arjun as product requirement dated 15/02/2017
        //window.history.pushState("object or string", "Title", site_url);

        origin_url = changeAjaxCallUrl(site_url);
        origin_url = origin_url + '?ajax_call=1&_country='+country_code;
        site_url = site_url + '?ajax_call=1';

        $("#loading_img").css('display', 'block');
        $(".gtime_out").hide();
        $.ajax({
            type: 'GET',
            url: origin_url,
            success: function (response_data) {
                $("#page_no").val(page_no);


                var response = $.parseJSON(response_data);
                var data_html = response.data;
                var data_count = response.r_count;
                var data_status = response.status_code;
				console.log("limit"+limit+"count"+data_count);
                //for search response script starts here
                if (page == 'search') {
                    if (data_status == 1) {
                        $("#" + $('#currTab').val() + " #load_more_content").append(data_html);
                        //$("#wrapper").prepend(data_html);
                        $("#loading_img").hide();
                        if (data_count < limit) {
                            $("#load_more_button").hide();
                        }
                    } else {
                        $("#" + $('#currTab').val() + " #load_more_content").append(data_html);
                        $("#loading_img").hide();
                        $("#load_more_button").hide();
                    }
                    loading = false;
                    /* $(function () {
                        $("img.lazy").lazyload({threshold: 200});
                    }); */
                    return false;
                }
                //for search response script ends here
                //script for artist details s tarts
                if (page == 'artist') {
                    if (data_status == 1) {
                        //$("#wrapper").prepend(data_html);
                        $("#" + $('#currTab').val() + " #load_more_content").append(data_html);
                        $("#loading_img").hide();
                        if (data_count < limit) {
                            $("#load_more_button").hide();
                            $(".rowcount").val('0');
                        }
                    } else {
                        $("#" + $('#currTab').val() + " #load_more_content").append(data_html);
                        $("#loading_img").hide();
                        $("#load_more_button").hide();
                        $(".rowcount").val('0');
                    }
                    loading = false;
                    /* $(function () {
                        $("img.lazy").lazyload({threshold: 200});
                    }); */
                    return false;
                }

                //script for artist details ends

//                $("#page_no").val(page_no);
                if (data_status == 1) {
                    $(data_html).hide().appendTo('#load_more_content').fadeIn('slow');
                    $("#loading_img").hide();
                    if (data_count < limit) {
                        $("#load_more_button").hide();
                        $(".rowcount").val('0');
                    }
                } else {
                    $("#loading_img").hide();
                    $("#load_more_button").hide();
                    $(".rowcount").val('0');
                }
                movieFlip();
                loading = false;
                /* $(function () {
                    $("img.lazy").lazyload({threshold: 200});
                }); */
            },
            error: function (e) {
                e.responseText();
            }
        });

        return false;
    });
    //load more ajax ends

    //load previous ajax starts
    $(document).on('click', '.load_prev_button', function (e) {
        e.preventDefault();
        var limit = (parseInt($("#r_limit").val()));
        var start = (parseInt($("#r_start").val()) - limit);
        $("#r_start").val(start);
        //var gnr = $("#genre").val();
        var page = $("#page").val();
        var site_url;
        var origin_url = $('#origin_url').val();
		if (hungamaGetCookie('_hcntr')) {
			country_code = hungamaGetCookie('_hcntr');
		} else {
			country_code = '';	
		}
        if (page == 'artist' || page == 'artist_details') {
            var role = $("#role").val();
            var id = $("#id").val();
            var type = $("#type").val();
            var subtype = $("#subtype").val();
            var method = $("#method").val();
            var page_no = $("#page_no").val();
            var title = $("#title").val();
            page_no = (parseInt(page_no) - 1);
            site_url = gen_artist_urls({method: method, cnt_role: role, title: title, id: id, type: type, subtype: subtype, page_no: page_no});
        } else if (page == 'video') {
            var lang = $("#language").val();
            var genre = $("#genre").val();
            var method = $("#method").val();
            var page_no = $("#page_no").val();
            var title = $("#title").val();
            var id = $("#id").val();
            page_no = (parseInt(page_no) - 1);
            if (method == 'music_videos') {
                site_url = createVideoListingUrl({method: 'music_videos', cnt_lang: lang, cnt_genre: genre, page_no: page_no});
            } else if (method == 'explore') {
                site_url = createVideoListingUrl({method: method, cnt_id :id,cnt_title: title, page_no: page_no});
            } else {
                site_url = createVideoListingUrl({method: 'genre1', cnt_lang: lang, cnt_genre: genre, page_no: page_no});
            }
        } else if (page == 'music') {
            var language = $("#language").val();
            var type = $("#type").val();
            var subtype = $("#subtype").val();
            var sortby = $("#sortby").val();
            var method = $("#method").val();
            var genre = $("#genre").val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) - 1);
            //site_url = gen_music_urls({method:method, cnt_type:type,cnt_lang:language,cnt_subtype:subtype,cnt_sortby:sortby, page_no:page_no});
            site_url = gen_music_urls({method: method, cnt_type: type, cnt_lang: language, cnt_subtype: subtype, cnt_genre: genre, page_no: page_no});
        } else if (page == 'movie') {
            var select = document.getElementById("language");
            var language = $("#language").val();
            var type = $("#type").val();
            var subtype = $("#subtype").val();
            var sortby = $("#sortby").val();
            var method = $("#method").val();
            var page_no = $("#page_no").val();
            var genre = $("#genre").val();
            page_no = (parseInt(page_no) - 1);
            //site_url = gen_movie_urls({method:method, cnt_type:type,cnt_lang:language,cnt_genre:genre,cnt_subtype:subtype,cnt_sortby:sortby, page_no:page_no});
            site_url = gen_movie_urls({method: method, cnt_type: type, cnt_lang: language, cnt_genre: genre, page_no: page_no});
        } else if (page == 'search') {
            var tabId = $('.' + $('#currTab').val()).attr('class').split(' ')[0];
            var searchKeyword = $('#search_keyword').val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) - 1);
            site_url = gen_search_urls('viewSearchPage', '', '', tabIdArr[tabId]['subType'], searchKeyword, tabIdArr[tabId]['type'], page_no);
        } else if (page == 'music_videos') {
            var lang = $("#language").val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) - 1);
            site_url = createVideoListingUrl({method: 'music_videos', cnt_lang: lang, page_no: page_no});
        } else if (page == 'shortfilms') {
            var lang = $("#language").val();
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) - 1);
            site_url = createVideoListingUrl({method: 'shortfilmsListing', cnt_lang: lang, page_no: page_no});
        } else if (page == 'more') {
            var id = $("#id").val();
            var title = $("#title").val();
            var moretype = $("#moretype").val();
            var page_no = $("#page_no").val();
			var section_id = $("#section_id").val();
            page_no = (parseInt(page_no) - 1);
            site_url = gen_more_urls({method: 'more', id: id, title: title, moretype: moretype, page_no: page_no, section_id:section_id});
        } else if (page == 'html') {
            var page_no = $("#page_no").val();
            page_no = (parseInt(page_no) - 1);
            site_url = gen_html_urls({method: 'winners', page_no: page_no});
        }

        // comment by arjun as product requirement dated 15/02/2017
        //window.history.pushState("object or string", "Title", site_url);

        origin_url = changeAjaxCallUrl(site_url);
        origin_url = origin_url + '?ajax_call=1&_country='+country_code;
        site_url = site_url + '?ajax_call=1';

        $("#loading_prev_img").css('display', 'block');
        $(".gtime_out").hide();
        $.ajax({
            type: 'GET',
            url: origin_url,
            success: function (response_data) {
                var response = $.parseJSON(response_data);
                var data_html = response.data;
                var data_count = response.r_count;
                var data_status = response.status_code;
                $("#page_no").val(page_no);

                //for search response script starts here
                if (page == 'search') {
                    $("#page_no").val(page_no);
                    if (parseInt(page_no) <= 1) {
                        $("#load_prev_button").hide();
                    }

                    if (data_status == 1) {
                        $("#" + $('#currTab').val() + " #load_more_content").prepend(data_html);
                        $("#loading_prev_img").hide();
                        $(".nodata").hide();
                        if (start < limit) {
                            $("#load_prev_button").hide();
                        }
                    }
                    loading = false;
                    /* $(function () {
                        $("img.lazy").lazyload({threshold: 200});
                    }); */
                    return false;
                }
                //for search response script ends here
                //Script for Artist Details starts
                if (page == 'artist') {
                    $("#page_no").val(page_no);
                    if (parseInt(page_no) <= 1) {
                        $("#load_prev_button").hide();
                    }
                    if (data_status == 1) {
                        $("#" + $('#currTab').val() + " #load_more_content").prepend(data_html);
                        $("#loading_prev_img").hide();
                        $(".nodata").hide();
                        if (start < limit) {
                            $("#load_prev_button").hide();
                            $(".rowcount").val('0');
                        }
                    } else {
                        $("#loading_prev_img").hide();
                        $("#load_prev_button").hide();
                        $(".rowcount").val('0');
                    }

                    loading = false;
                    /* $(function () {
                        $("img.lazy").lazyload({threshold: 200});
                    }); */
                    return false;
                }
                //Script for Artist Details ends

                $("#page_no").val(page_no);
                if (parseInt(page_no) <= 1) {
                    $("#load_prev_button").hide();
                }
                if (data_status == 1) {
                    $("#load_more_content").prepend(data_html);
                    $("#loading_prev_img").hide();
                    $(".nodata").hide();
                    if (start < limit) {
                        $("#load_prev_button").hide();
                    }
                } else {
                    //$("#load_more_content").prepend(data_html);
                    $("#loading_prev_img").hide();
                    $("#load_prev_button").hide();
                }
                movieFlip();
                loading = false;
                /* $(function () {
                    $("img.lazy").lazyload({threshold: 200});
                }); */
            },
            error: function (e) {
                e.responseText();
            }
        });

        return false;
    });
    //load previous ajax ends
    var click_counts = 0;
    var page = $("#page").val();


    /*
     * Neha - function added for search autosuggest
     */
    $.widget("custom.catcomplete", $.ui.autocomplete, {
        _create: function () {
            this._super();
            this.widget().menu("option", "items", "> :not(.ui-autocomplete-category)");
        },
        _renderMenu: function (ul, items) {
            var that = this,
                    currentCategory = "";
            $.each(items, function (index, item) {
                var li;
                if (item.category != currentCategory) {
                    ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                    currentCategory = item.category;
                }
                li = that._renderItemData(ul, item);
                if (item.category) {
                }
            });
        }
    });


    $(document).on('click', '#h-all, #h-songs, #h-albums, #h-playlists, #h-movies, #h-videos, #h-radio, #h-artists, .search-view-all', function () {
        $('#load_more_button').hide();

        var over = '<div class="loading">Loading&#8230;</div>';
        $(over).appendTo('body');

        if ($(this).attr('class') == 'search-view-all') {
            var thisValue1 = $(this).attr('value');
            var thisValue = thisValue1.split('_');
            var tabClass = thisValue[1];
            var tabId = thisValue[0];
        } else {
            var tabClass = $(this).attr('class').split(' ')[0];
            var tabId = this.id;
        }
        $('#currTab').val(tabClass);
        $('#' + $('#currTab').val()).html('');
        var searchKeyword = $('#search_keyword').val();

        var ajaxUrl = gen_search_urls('viewSearchPage', '', '', tabIdArr[tabId]['subType'], searchKeyword, tabIdArr[tabId]['type'], '0');
        if (ajaxUrl == '') {
            $('.loading').remove();
            return false;
        }
        ajaxUrl = encodeURI(ajaxUrl);
        window.history.pushState("object or string", "Title", ajaxUrl);
        ajaxUrl = ajaxUrl;
        $.ajax({
            url: ajaxUrl,
            method: "GET",
            success: function (data) {
                $('.loading').remove();
                $('#wrapper').html('');
                $('#wrapper').html(data);
                $('#load_more_button').show();
                if (tabId == 'h-all') {
                    $('.liveradio-carousal').owlCarousel(liveradio_options);
                    $('.album-carousal').owlCarousel(albumcarousel_options);
                    $('.blockmov-carousal').owlCarousel(movie_block_options);
                    $('.musicvdo-carousal').owlCarousel(video_home_options);
//                    $('.art-carousal').owlCarousel(home_options);
                    $('#movie_banner').html('');
                    if ($("#category").val() == 'movie_dtl') {
                        $('body').addClass('video-player-shortfilm');
                    } else {
                        $('body').removeClass('video-player-shortfilm');
                    }
                }
            }
        });
    });
    //Search functions ends here

    //artist details starts
    $(document).on('click', '#a-all, #a-songs, #a-albums,#a-playlists,#a-movies, #a-videos, #a-artists', function () {
        var over = '<div class="loading">Loading&#8230;</div>';
        $(over).appendTo('body');
        var id = $("#id").val();
        var tabClass = $(this).attr('class').split(' ')[0];
        var tabId = this.id;
        $('#currTab').val(tabClass);
        $('#' + $('#currTab').val()).html('');
        var ajaxUrl = gen_artist_urls('artistDetails', id, '', '', tabIdArr[this.id]['type'], tabIdArr[this.id]['subType']);
        if (ajaxUrl == '') {
            $('.loading').remove();
            return false;
        }
        ajaxUrl = encodeURI(ajaxUrl);
        window.history.pushState("object or string", "Title", ajaxUrl);
        ajaxUrl = ajaxUrl + "&ajax_call=2";
        $.ajax({
            url: ajaxUrl,
            method: "GET",
            success: function (data) {
                $('.loading').remove();
                $('#wrapper').html('');
                $('#wrapper').html(data);
                $('#load_more_button').show();
                $('.album-carousal').owlCarousel(albumcarousel_options);
                $('.blockmov-carousal').owlCarousel(movie_block_options);
                $('.musicvdo-carousal').owlCarousel(video_home_options);

                $('#movie_banner').html('');
                if ($("#category").val() == 'movie_dtl') {
                    $('body').addClass('video-player-shortfilm');
                } else {
                    $('body').removeClass('video-player-shortfilm');
                }
            }
        });
    });

//    $(document).delegate(".tvshow", "click", function () {
//        $('#p_loading').html('<div class="loading">Loading...</div>');
//        var str = $(this).attr('value');
//        var show = str.split('-');
//        var showid = show[0];
//        var sno = show[1];
//        $.ajax({
//            type: 'POST',
//            url: $('#origin_url').val() + "tvshow/seasondata/",
//            data: 'showid=' + showid + '&sno=' + sno,
//            success: function (result) {
//                $('#p_loading').html('');
//                $("#show_details").html('');
//                $("#show_details").html(result);
//                /* $(function () {
//                    $("img.lazy").lazyload({threshold: 200});
//                }); */
//            }
//        });
//    });
$(document).delegate(".tvshow", "click", function () {
        var tvshow_seasondata = false;
        $('#p_loading').html('<div class="loading">Loading...</div>');
        var str = $(this).attr('value');
        var show = str.split('-');
        var showid = show[0];
        var sno = show[1];
        var content = '';
        var page_no = 1;
        page_no = parseInt(page_no) + 1;
        $("#season_ids").val(sno);
        console.log($("#season_ids").val());
        $.ajax({
            type: 'POST',
            url: $('#origin_url').val() + '?c=tvshow&m=seasondata1&sno=' + sno + '&page_no=1',
            dataType: 'json',
            success: function (result) {
                console.log(result[0]['total']);
                $('#p_loading').html('');
                $("#page_no").val(page_no);
                //page_no = page_no++;                
                if (result != '') {
                    $.each(result, function (response) {
                        content += '<div class="song"><div class="song-thmb">' + result[response].song_thumb + '<a class="hovercont" id="pajax_a" href="' + result[response].play_thumb + '"  title="' + result[response].episode_name + '"><span class="icon-ic_play"></span></a><a class="icon-ic_play" id="pajax_a" href="' + result[response].play_thumb + '" title="' + result[response].episode_name + '"></a></div><div class="song-name"><h4><a id="pajax_a" href="' + result[response].tvshow_url + '" title="' + result[response].episode_name + '" class="art-ttl">' + result[response].episode_name + '</a></h4></div><div class="song-action"><a title="Download" class="dwnld-movie" data-disp-img="' + result[response].episode_image + '" href="javascript:void(0);"><i class="icon-ic_download"></i></a></div><div class="clear"></div><input type="hidden" value="yes" name="tvshow_load" id="tvshow_load"/><input type="hidden" value="1" name="page_no" id="page_no"/></div>';
                    });
                    $("#seasondata").html('');
                    $("#seasondata").html(content);   
                    if(result[0].total > 10 ){  $("#view_more_seasons").show();} 
                }
                $("#page_no").val('1');
            }
        });
    });

    //artist details ends


    $(document).on('click', '#myacc-dropdown a', function () {
        $('#myacc-dropdown').hide();
    });

    $(document).on('click', '.myacc-links li a', function () {
        console.log('in hide menu myacc-links');
        hidemenu();
    });

    $(document).on('click', '.myacc-info a', function () {
        console.log('in hide menu .myacc-info a');
        hidemenu();
    });

    $(document).on('click', '#myacc-login2 a.edit', function () {
        console.log('in hide menu #myacc-login2 a.edit');
        hidemenu();
    });

    $(document).on('click', '.main ul li a', function () {
        console.log('in hide menu main');
        hidemenu();
        $('.searchlens').show();
    });

    $(document).on('click', '#subpopclose', function () {
        console.log("in continue");
        $('#musicpro,.showBg').hide();
        $('#unmovies,.showBg').hide();
        $('#sbscrpop,.showBg').hide();
    });
    checkLoggedInStatus();


});

function threeDotsJavascript(e1) {
    var $popup = $('#popup-dots');
    me = $(e1);
    //console.log(e1);
    /*$(e1).focusout(function(){
     //console.log('threeDots focusout');
     $( ".overlay_wrapper" ).hide();
     });*/
    $("#popup-dots").removeClass('bounceIn animated');
    if ($(".overlay_wrapper").css('display') == 'block' && $(e1).hasClass('prevTarget')) {
        console.log('cond1');
        $('.prevTarget').removeClass('prevTarget');
        $(".overlay_wrapper").hide();
        $("#popup-dots").removeClass('bounceIn animated');
        //$popup.hide();
    } else if ($(".overlay_wrapper").css('display') == 'block' && !$(e1).hasClass('prevTarget')) {
        console.log('cond2');
        $('.prevTarget').removeClass('prevTarget');
        $(e1).addClass('prevTarget');
        $(".overlay_wrapper").show();
        $popup.show();
        $popup.css({top: 0, left: 0});
        if ($(document).width() > 1024) {		//for desktop
            var calculator = new $.PositionCalculator({
                item: $popup,
                itemAt: "bottom right",
                target: e1,
                targetAt: "top right",
                flip: "both"
            });
            var posResult = calculator.calculate();

            var scrollTop = $(document).scrollTop();
            var elementOffset = $(e1).offset().top;
            var distance = (elementOffset - scrollTop);
            var topHeight = (posResult.moveBy.y - 8);
            var topWidth = (posResult.moveBy.x + 25);
            $popup.css({
                top: topHeight + "px",
                left: topWidth + "px",
                position: "absolute"
            });
            if (parseInt(me.offset().top) < parseInt($('#popup-dots').css('top')) + 50) {
                $('.dropdown').addClass('arrow');
            } else {
                $('.dropdown').removeClass('arrow');
            }
        } else {		//for mobile, tablets
            var pop_height = $("#popup-dots").height() / 2;

            $popup.css({
                top: "50%",
                left: "50%",
                position: "fixed",
                "margin-left": "-75px",
                "margin-top": "-" + pop_height + "px"
            });
            $('.popup_boverlay').show();
        }
        $("#popup-dots").addClass('bounceIn animated');
        $popup.show();
    } else if ($(".overlay_wrapper").css('display') == 'none') {
        console.log('cond3 new');
        $(".overlay_wrapper").show();
        $('.prevTarget').removeClass('prevTarget');
        $(e1).addClass('prevTarget');
        $popup.show();
        $popup.css({top: 0, left: 0});

        if ($(document).width() > 1024) {		//for desktop
            var calculator = new $.PositionCalculator({
                item: $popup,
                itemAt: "bottom right",
                target: e1,
                targetAt: "top right",
                flip: "both"
            });
            var posResult = calculator.calculate();
            var scrollTop = $(document).scrollTop();
            var elementOffset = $(e1).offset().top;
            var distance = (elementOffset - scrollTop);
            var topHeight = (posResult.moveBy.y - 8);
            var topWidth = (posResult.moveBy.x + 25);
            $popup.css({
                top: topHeight + "px",
                left: topWidth + "px",
                position: "absolute"
            });
            if (parseInt(me.offset().top) < parseInt($('#popup-dots').css('top')) + 50) {
                $('.dropdown').addClass('arrow');
            } else {
                $('.dropdown').removeClass('arrow');
            }
        } else {		//for mobile, tablets
            var pop_height = $("#popup-dots").height() / 2;

            $popup.css({
                top: "50%",
                left: "50%",
                position: "fixed",
                "margin-left": "-75px",
                "margin-top": "-" + pop_height + "px"
            });
            $('.popup_boverlay').show();
        }
        $("#popup-dots").addClass('bounceIn animated');
        $popup.show();
    }

    return false;
}

function gen_movie_urls(params) {
    var method, type, lang, subtype, sortby, page_no, genre;
    if (params.method){method = params.method;}
    if (params.cnt_type){type = params.cnt_type;}
    if (params.cnt_lang){lang = params.cnt_lang;}
    if (params.cnt_genre){genre = params.cnt_genre;}
    if (params.cnt_subtype){subtype = params.cnt_subtype;}
    if (params.cnt_sortby){sortby = params.cnt_sortby;}
    if (params.page_no){page_no = params.page_no;}
    if (params.cnt_id){id = params.cnt_id;}
    if (params.cnt_title){title = params.cnt_title;}
    var url_string = '';
    var return_url = '';

    if(method == 'movieHome' && subtype != ''){
        url_string+='movies/'+subtype+'/'+sortby+'/'+lang;
    } else if(method == 'movieLanding'){
        url_string+='movies/'+lang;
    } else if(method == 'movieHome'){
        url_string+='movies/'+lang;
    } else if(method == 'movieList' && type == 'movie'){
        if(page_no){
            url_string+='movies/'+lang+'/'+genre+'/'+page_no;
        } else {
            url_string+='movies/'+lang+'/'+genre;
        }
    } else if (method == 'moviedetails') {
        url_string = 'movie/' + title + '/' + id;
    } else if (method == 'shortfilmsListing') {
        url_string ='shortfilms/' + lang;
    } else if (method == 'shortfilmsdetails') {
        url_string = 'movies/shortfilm-' + title + '/' + id;
    } else if (method == 'collectionListing') {
        url_string = 'collection-listing/' + lang + '/page-' + page_no;
    } else if (method == 'collectiondetails') {
        url_string = 'collection/' + title + '/' + id;
    } else if (method == 'themeListing') {
        url_string = 'theme-listing/' + lang + '/page-' + page_no;
    } else if (method == 'themedetails') {
        url_string = 'theme/' + title + '/' + id;
    } else if (method == 'freemovieList' && type == 'movie') {
        url_string = 'movies-listing/free/' + lang + '/' + genre + '/' + sortby + '/page-' + page_no;
    } 

    url_string = url_string.trim('/');
    var root_url=$('#site_url').val();
    if(root_url && url_string) {
        return_url = root_url+url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}

function gen_movie_urls_old(params) {
    var method, type, lang, subtype, sortby, page_no, genre;
    if (params.method) {
        method = params.method;
    }
    if (params.cnt_type) {
        type = params.cnt_type;
    }
    if (params.cnt_lang) {
        lang = params.cnt_lang;
    }
    if (params.cnt_genre) {
        genre = params.cnt_genre;
    }
    if (params.cnt_subtype) {
        subtype = params.cnt_subtype;
    }
    if (params.cnt_sortby) {
        sortby = params.cnt_sortby;
    }
    if (params.page_no) {
        page_no = params.page_no;
    }
    if (params.cnt_id) {
        id = params.cnt_id;
    }
    if (params.cnt_title) {
        title = params.cnt_title;
    }
    var url_string = '';
    var return_url = '';

    if (method == 'movieHome' && subtype != '') {
        url_string += 'movies/' + subtype + '/' + sortby + '/' + lang;
    } else if (method == 'movieLanding') {
        url_string += 'movies/' + lang;
    } else if (method == 'movieHome') {
        url_string += 'movies/' + lang;
    } else if (method == 'movieList' && type == 'movie') {
        if (page_no) {
            url_string += 'movies/lang-' + lang + '/genre-' + genre + '/' + page_no;
        } else {
            url_string += 'movies/lang-' + lang + '/genre-' + genre;
        }
    } else if (method == 'moviedetails') {
        url_string = 'movies/movie-' + title + '/' + id;
    } else if (method == 'shortfilmsListing') {
        url_string = 'shortfilms/' + lang;
    } else if (method == 'shortfilmsdetails') {
        url_string = 'movies/shortfilm-' + title + '/' + id;
    } else if (method == 'collectionListing') {
        url_string = 'collection-listing/' + lang + '/page-' + page_no;
    } else if (method == 'collectiondetails') {
        url_string = 'movies/' + title + '-collection/' + id;
    } else if (method == 'themeListing') {
        url_string = 'theme-listing/' + lang + '/page-' + page_no;
    } else if (method == 'themedetails') {
        url_string = 'movies/' + title + '-theme/' + id;
    } else if (method == 'freemovieList' && type == 'movie') {
        url_string = 'movies-listing/free/' + lang + '/' + genre + '/' + sortby + '/page-' + page_no;
    }

    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();
    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
    return return_url;
}

function gen_music_urls(params) {
    var method, type, lang, subtype, sortby, page_no, title, id, genre;
    if (params.method){method = params.method;}
    if (params.cnt_type){type = params.cnt_type;}
    if (params.cnt_lang){lang = params.cnt_lang;}
    if (params.cnt_subtype){subtype = params.cnt_subtype;}
    if (params.cnt_sortby){sortby = params.cnt_sortby;}
    if (params.page_no){page_no = params.page_no;}
    if (params.cnt_id){id = params.cnt_id;}
    if (params.cnt_title){title = params.cnt_title;}
    if (params.cnt_genre){genre = params.cnt_genre;}

    var url_string = '';
    var return_url = '';
    if(method == "musiclist") {
        if (method == 'musiclist' && type == 'music' && subtype == 'audio_album') {
            if(page_no){
                url_string += 'music/'+lang+'/'+genre+'/'+page_no;
            } else {
                url_string += 'music/'+lang+'/'+genre;
            }
        } else if (method == 'musiclist' && type == 'music' && subtype == 'audio_track') {
            url_string += 'music-listing/'+lang+'/'+sortby+'/page-'+page_no;
        } else if (method == 'musiclist' && type == 'playlist') {
            url_string += 'playlist-listing/'+lang+'/'+sortby+'/page-'+page_no;
        } else if (method == 'musiclist' && type == 'radio') {
            url_string += 'radio-listing/'+lang+'/'+sortby+'/page-'+page_no;
        }
    } else if (method == "musicdetails") {
        if(subtype=='music') {
            url_string ='album/'+title+'/'+id;
        } else if(subtype=='song') {
            url_string ='song/'+title+'/'+id;
        } else if(subtype=='playlists') {
            url_string ='playlists/'+title+'/'+id;
        } else if(subtype=='radio') {
            url_string ='radio/'+title+'/'+id;
        } else if(method == 'musicdetails') {
            url_string ='music-details/'+subtype+'/'+id;
        } else if(method == 'musicdetails' && lang != '') {
            url_string ='music-details/'+lang+'/'+subtype+'/'+id;
        }
    } else if (method == "lyrics") {
        if(subtype=='song') {
            url_string ='song/lyrics/'+title+'/'+id;
        }
    } else if (method == 'liveradiodetails') {
        url_string = 'live-radio/'+title+'/'+id;
    }
    url_string = url_string.trim('/');
    var root_url=$('#site_url').val();

    if(root_url && url_string) {
        return_url = root_url+url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}

function gen_music_urls_old(params) {
    var method, type, lang, subtype, sortby, page_no, title, id, genre;
    if (params.method) {
        method = params.method;
    }
    if (params.cnt_type) {
        type = params.cnt_type;
    }
    if (params.cnt_lang) {
        lang = params.cnt_lang;
    }
    if (params.cnt_subtype) {
        subtype = params.cnt_subtype;
    }
    if (params.cnt_sortby) {
        sortby = params.cnt_sortby;
    }
    if (params.page_no) {
        page_no = params.page_no;
    }
    if (params.cnt_id) {
        id = params.cnt_id;
    }
    if (params.cnt_title) {
        title = params.cnt_title;
    }
    if (params.cnt_genre) {
        genre = params.cnt_genre;
    }

    var url_string = '';
    var return_url = '';
    if (method == "musiclist") {
        if (method == 'musiclist' && type == 'music' && subtype == 'audio_album') {
            if (page_no) {
                url_string += 'music/lang-' + lang + '/genre-' + genre + '/' + page_no;
            } else {
                url_string += 'music/' + lang + '/' + genre;
            }
        } else if (method == 'musiclist' && type == 'music' && subtype == 'audio_track') {
            url_string += 'music-listing/' + lang + '/' + sortby + '/page-' + page_no;
        } else if (method == 'musiclist' && type == 'playlist') {
            url_string += 'playlist-listing/' + lang + '/' + sortby + '/page-' + page_no;
        } else if (method == 'musiclist' && type == 'radio') {
            url_string += 'radio-listing/' + lang + '/' + sortby + '/page-' + page_no;
        }
    } else if (method == "musicdetails") {
        if (subtype == 'music') {
            url_string = 'music/album-' + title + '-songs/' + id;
        } else if (subtype == 'song') {
            url_string = 'music/song-' + title + '/' + id;
        } else if (subtype == 'playlists') {
            url_string = 'music/playlists/' + title + '/' + id;
        } else if (subtype == 'radio') {
            url_string = 'music/radio/' + title + '/' + id;
        } else if (method == 'musicdetails') {
            url_string = 'music-details/' + subtype + '/' + id;
        } else if (method == 'musicdetails' && lang != '') {
            url_string = 'music-details/' + lang + '/' + subtype + '/' + id;
        }
    } else if (method == "lyrics") {
        if(subtype=='song') {
            url_string ='song/lyrics/'+title+'/'+id;
        }
    } 
    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();

    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
    return return_url;
}

function gen_artist_urls(params) {
    var method, role, page_no,id,title,type,subtype;
    if (params.method){method = params.method;}
    if (params.cnt_role){role = params.cnt_role;}
    if (params.page_no){page_no = params.page_no;}
    if (params.id){id = params.id;}
    if (params.title){title = params.title;}
    if (params.type){type = params.type;}
    if (params.subtype){subtype = params.subtype;}
    var url_string = '';
    var method_seo = '';
    var return_url = '';
    if(method){
        if(method == 'artistDetails') {
            method_seo = 'artists';
            if (type == 'music' && subtype == 'audio_track') {
                //$url_string = 'artists/' . $title . '-songs/' . $id . '/page-' . $page_no;
                url_string = 'artist/'+title+'/songs/'+id;
				if(page_no){ url_string+='/'+page_no; }
            } else if (type == 'music' && subtype == 'audio_album') {
                //$url_string = 'artists/' . $title . '-album-songs/' . $id . '/page-' . $page_no;
                url_string = 'artist/'+title+'/albums/'+id;
				if(page_no){ url_string+='/'+page_no; }
            } else if (type == 'playlist') {
                //$url_string = 'artists/' . $title . '-playlists/' . $id . '/page-' . $page_no;
                url_string = 'artist/'+title+'/playlists/'+id;
				if(page_no){ url_string+='/'+page_no; }
            } else if (type == 'radio') {
                //$url_string = 'artists/' . $title . '-album-songs/' . $id;
                url_string = 'artist/'+title+'/radios/'+id;
				if(page_no){ url_string+='/'+page_no; }
            }else if(type == 'videos') {
                //url_string+=title+'-'+type+'/'+id;
                url_string = 'artist/'+title+'/videos/'+id;
                if(page_no){ url_string+='/'+page_no; }
            }else if(type=='movie'){
                url_string = 'artist/'+title+'/movies/'+id;
                if(page_no){ url_string+='/'+page_no; }
            } else if (type == 'artist') {
                //$url_string = 'artists/' . $title . '-similar-artist/' . $id . '/page-' . $page_no;
                url_string = 'artist/'+title+'/similar-artists/'+id;
				if(page_no){ url_string+='/'+page_no; }
            } else if (type == 'all') {
                url_string = 'artist/'+title+'/all/'+id;
            } else if (type == 'similarartist') {
                //$url_string = 'artists/' . $title . '-similar-artists/' . $id;
                url_string = 'artist/'+title+'/similar-artists/'+id;
				if(page_no){ url_string+='/'+page_no; }
            }
        } else if(method == 'artistList') {
            method_seo = 'artist-lists';
            url_string+=method_seo+'/';
            if(role){ url_string+=role+'/'; }
			if(page_no){ url_string+='/'+page_no; }
            //if(page_no){ url_string+='page-'+page_no; }
        } else {
            method_seo = 'artists';
            url_string+=method_seo+'/';
        }
    }

    url_string = url_string.trim('/');
    var root_url=$('#site_url').val();
    if(root_url && url_string) {
        return_url = root_url+url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}

function gen_artist_urls_old(params) {
    var method, role, page_no, id, title, type, subtype;
    if (params.method) {
        method = params.method;
    }
    if (params.cnt_role) {
        role = params.cnt_role;
    }
    if (params.page_no) {
        page_no = params.page_no;
    }
    if (params.id) {
        id = params.id;
    }
    if (params.title) {
        title = params.title;
    }
    if (params.type) {
        type = params.type;
    }
    if (params.subtype) {
        subtype = params.subtype;
    }
    var url_string = '';
    var method_seo = '';
    var return_url = '';
    if (method) {
        if (method == 'artistDetails') {
            method_seo = 'artists';
            url_string += method_seo + '/';
            if (type == 'artist') {
                url_string += title + '-similar-' + type + '/' + id;
                if (page_no) {
                    url_string += '/page-' + page_no;
                }
            } else if (type == 'videos') {
                url_string += title + '-' + type + '/' + id;
                if (page_no) {
                    url_string += '/page-' + page_no;
                }
            } else if (type == 'music' && subtype == 'audio_album') {
                url_string += title + '-album-songs/' + id;
                if (page_no) {
                    url_string += '/page-' + page_no;
                }
            } else if (type == 'music' && subtype == 'audio_track') {
                url_string += title + '-songs/' + id;
                if (page_no) {
                    url_string += '/page-' + page_no;
                }
            } else if (type == 'playlist') {
                url_string += title + '-playlists/' + id;
                if (page_no) {
                    url_string += '/page-' + page_no;
                }
            } else if (type == 'movie') {
                url_string += title + '-movies/' + id;
                if (page_no) {
                    url_string += '/page-' + page_no;
                }
            }
        } else if (method == 'artistList') {
            method_seo = 'artist-lists';
            url_string += method_seo + '/';
            if (role) {
                url_string += role + '/';
            }
            if (page_no) {
                url_string += 'page-' + page_no;
            }
        } else {
            method_seo = 'artists';
            url_string += method_seo + '/';
        }
    }

    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();
    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
    return return_url;
}

function createVideoListingUrl(params) {
    var method, lang, genre, page_no, id, title,cnt_type_id;
    if (params.method){method = params.method;}
    if (params.cnt_lang){lang = params.cnt_lang;}
    if (params.cnt_genre){genre = params.cnt_genre;}
    if (params.page_no){page_no = params.page_no;}
    if (params.cnt_id){id = params.cnt_id;}
    if (params.cnt_type_id){cnt_type_id = params.cnt_type_id;}
    if (params.cnt_title){title = params.cnt_title;}

    var url_string = '';
    var return_url = '';

    if(method == 'index'){
        url_string+='videos/'+lang;
    } else if(method == 'music_videos'){
        //url_string+='music-videos/'+lang+'/'+genre+'/page-'+page_no;
        if(page_no){
            url_string+='videos/'+lang+'/'+genre+'/'+page_no;
        } else {
            url_string+='videos/'+lang+'/'+genre;
        }
    } else if(method == 'genre1'){
        url_string+='videos-'+genre+'/'+lang+'/page-'+page_no;
    } else if(method == 'shortfilmsListing'){
        url_string+='shortfilms/'+lang+'/page-'+page_no;
    }  else if(method == 'videoDetails'){
        if(cnt_type_id==53 || cnt_type_id==51){
			url_string+='video/short-video/'+title+'/'+id;
		}else{
			url_string+='video/'+title+'/'+id;
		}

    } else if(method == 'videoPlaylistDetails'){
        url_string+='video-playlist/'+title+'/'+id;
    } else if (method == 'videoplaylistqueue') {
        url_string+= 'video-playlist/'+title+'/'+id;
        if (action == 'play') {
            url_string+= '/play';
        }
    } else if (method == 'videoplaylistdetails') {
        url_string+='video-playlist/'+title+'/'+id;
    } else if(method == 'explore'){
        if(page_no){
            url_string+='videos/explore/'+title+'-'+id+'/'+page_no;
        } else {
            url_string+='videos/explore/'+title+'-'+id;
        }
    }

    url_string = url_string.trim('/');
    var root_url=$('#site_url').val();

    if(root_url && url_string) {
        return_url = root_url+url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}

/* function to create url with given paramters to be called using ajax */
function createVideoListingUrl_old(params) {
    var method, lang, genre, page_no, id, title;
    if (params.method) {
        method = params.method;
    }
    if (params.cnt_lang) {
        lang = params.cnt_lang;
    }
    if (params.cnt_genre) {
        genre = params.cnt_genre;
    }
    if (params.page_no) {
        page_no = params.page_no;
    }
    if (params.cnt_id) {
        id = params.cnt_id;
    }
    if (params.cnt_title) {
        title = params.cnt_title;
    }

    var url_string = '';
    var return_url = '';

    if (method == 'index') {
        url_string += 'videos/' + lang;
    } else if (method == 'music_videos') {
        //url_string+='music-videos/'+lang+'/'+genre+'/page-'+page_no;
        if (page_no) {
            url_string += 'videos/lang-' + lang + '/genre-' + genre + '/' + page_no;
        } else {
            url_string += 'videos/lang-' + lang + '/genre-' + genre;
        }
    } else if (method == 'genre1') {
        url_string += 'videos-' + genre + '/' + lang + '/page-' + page_no;
    } else if (method == 'shortfilmsListing') {
        url_string += 'shortfilms/' + lang + '/page-' + page_no;
    } else if (method == 'videoDetails') {
        url_string += 'videos/song-' + title + '/' + id;
    } else if (method == 'videoPlaylistDetails') {
        url_string += 'videos/playlist/' + title + '/' + id;
    }

    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();

    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
    return return_url;
}


/*function gen_searchs_urls(method, id, title, subtype, keyword, type, start, ajax_call) {
 var url_string = '';
 var return_url = '';
 
 if(method == 'getGroupedSearchByText') {
 url_string+='autosuggest-search/'+keyword;
 }else if(method == 'getTopTrends') {
 url_string+='toptrends-search/';
 }else if(method == 'getPopularSearch') {
 url_string+='popular-search/';
 } else {
 if(type == 'all') {
 url_string+='search/'+keyword;
 } else if(type == 'music') {
 url_string+='search-music/'+subtype+'/'+keyword+'/'+start;
 } else if(type == 'videos') {
 url_string+='search-videos/'+keyword+'/'+start;
 } else if(type == 'movies') {
 url_string+='search-movies/'+keyword+'/'+start;
 } else if(type == 'artists') {
 url_string+='search-artist/'+keyword+'/'+start;
 }
 }
 
 url_string = url_string.trim('/');
 var root_url=$('#site_url').val();
 
 if(root_url && url_string) {
 return_url = root_url+url_string;
 } else {
 return_url = root_url;
 }
 return return_url;
 }*/

function gen_search_urls(method, id, title, subtype, keyword, type, page_no, ajax_call) {
    var url_string = '';
    if (method == 'getGroupedSearchByText') {
        url_string += 'autosuggest-search/' + keyword;
    } else if (method == 'getTopTrends') {
        url_string += 'toptrends-search';
    } else if (method == 'getPopularSearch') {
        url_string += 'popular-search';
    } else {
        if (type == 'all') {
            url_string += 'search/' + keyword;
        } else if (type == 'music') {
            if (subtype == 'audio_album') {
                url_string += 'search-albums/' + keyword;
            } else if (subtype == 'audio_track') {
                url_string += 'search-tracks/' + keyword;
            } else if (subtype == 'playlist') {
                url_string += 'search-playlist/' + keyword;
            } else if (subtype == 'radio') {
                url_string += 'search-radio/' + keyword;
            }
        } else if (type == 'videos') {
            url_string += 'search-videos/' + keyword;
        } else if (type == 'video') {
            url_string += 'search-video/' + keyword;
        } else if (type == 'movies') {
            url_string += 'search-movies/' + keyword;
        } else if (type == 'artist') {
            url_string += 'search-artist/' + keyword;
        } else if (type == 'tvshow') {
            url_string += 'search-tvshow/' + keyword;
        } else if (type == 'tvepisode') {
            url_string += 'search-tvepisode/' + keyword;
        } else if (type == 'vplaylist') {
            url_string += 'search-vplaylist/' + keyword;
        } else if (type == 'tvshows') { 
            url_string += 'search-tvshows/' + keyword;
        } else if (type == 'tvepisodes') { 
            url_string += 'search-tvepisodes/' + keyword;
        } else if (type == 'movie') { 
            url_string += 'search-movie/' + keyword;
        } else if (type == 'collection') { 
            url_string += 'search-collection/' + keyword;
        } else if (type == 'theme') {
            url_string += 'search-theme/' + keyword;
		} else if (type == 'shortfilms') { 
            url_string += 'search-shortfilms/' + keyword;
        }
    }
    if (page_no != '' && type != 'all' && method != 'getGroupedSearchByText' && method != 'getTopTrends' && method != 'getPopularSearch') {
//        url_string += '-page-' + page_no;
        url_string += '/' + page_no;
    }

    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();

    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}

/*function gen_search_urls(method, id, title, subtype, keyword, type, page_no, ajax_call) {
    var url_string = '';
    if (method == 'getGroupedSearchByText') {
        url_string += 'autosuggest-search/' + keyword;
    } else if (method == 'getTopTrends') {
        url_string += 'toptrends-search';
    } else if (method == 'getPopularSearch') {
        url_string += 'popular-search';
    } else {
        if (type == 'all') {
            url_string += 'search/' + keyword;
        } else if (type == 'music') {
            if (subtype == 'audio_album') {
                url_string += 'search-albums/' + keyword;
            } else if (subtype == 'audio_track') {
                url_string += 'search-tracks/' + keyword;
            } else if (subtype == 'playlist') {
                url_string += 'search-playlist/' + keyword;
            } else if (subtype == 'radio') {
                url_string += 'search-radio/' + keyword;
            }
        } else if (type == 'videos') {
            url_string += 'search-videos/' + keyword;
        } else if (type == 'movies') {
            url_string += 'search-movies/' + keyword;
        } else if (type == 'artist') {
            url_string += 'search-artist/' + keyword;
        }
    }
    if (page_no != '' && type != 'all' && method != 'getGroupedSearchByText' && method != 'getTopTrends' && method != 'getPopularSearch') {
        url_string += '-page-' + page_no;
    }

    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();

    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}*/

function gen_more_urls(params) {
    var method, page_no, id, title,moretype;
    if (params.method){method = params.method;}
    if (params.page_no){page_no = params.page_no;}
    if (params.id){id = params.id;}
    if (params.title){title = params.title;}
    if (params.moretype){moretype = params.moretype;}
	if (params.section_id){section_id = params.section_id;}
//    alert('type : '+type);
    var url_string = '';
    var return_url = '';
    if(method == 'more'){
        if(moretype=='comingsoon'){
            url_string+='all-comingsoon/'+title+'/'+id;
        } else {
            //url_string+='all/'+title+'/'+id;
			url_string+='all/'+title+'-'+section_id+'/'+id;
        }
    }

    if (page_no != '') {
        url_string+='/'+page_no;
    }

    url_string = url_string.trim('/');
    var root_url=$('#site_url').val();

    if(root_url && url_string) {
        return_url = root_url+url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}

function gen_more_urls_old(params) {
    var method, page_no, id, title, moretype;
    if (params.method) {
        method = params.method;
    }
    if (params.page_no) {
        page_no = params.page_no;
    }
    if (params.id) {
        id = params.id;
    }
    if (params.title) {
        title = params.title;
    }
    if (params.moretype) {
        moretype = params.moretype;
    }
//    alert('type : '+type);
    var url_string = '';
    var return_url = '';
    if (method == 'more') {
        if (moretype == 'comingsoon') {
            url_string += 'more-comingsoon/' + title + '/' + id + '/page-' + page_no;
        } else {
            url_string += 'more/' + title + '/' + id + '/page-' + page_no;
        }
    }

    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();

    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
    return return_url;
}
function gen_html_urls(params) {
    var method, page_no;
    if (params.method) {
        method = params.method;
    }
    if (params.page_no) {
        page_no = params.page_no;
    }

    var url_string = '';
    var return_url = '';
    if (method == 'winners') {
        url_string += 'rewards/winners';
        if (page_no) {
            url_string += '/page-' + page_no;
        }
    }
    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();

    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
	return_url = return_url+'/';
    return return_url;
}
function gen_user_urls(params) {
    var method, page_no, user_id;
    if (params.user_id) {
        user_id = params.user_id;
    }
    if (params.method) {
        method = params.method;
    }
    if (params.contenttype) {
        contenttype = params.contenttype;
    }
    if (params.playlist_id) {
        playlist_id = params.playlist_id;
    }
    if (params.page_no) {
        page_no = params.page_no;
    }

    var url_string = '';
    var return_url = '';
    if (method == 'myPlaylist') {
        url_string += 'user/'+user_id+'/playlist';
        if (contenttype) {
            url_string += '/' + contenttype;
        }
        if (page_no) {
            url_string += '/page-' + page_no;
        }
    } else if (method == 'myPlaylistDetails') {
        url_string += 'user/'+user_id+'/playlist';
        if (contenttype) {
            url_string += '/' + contenttype;
        }
        if (playlist_id) {
            url_string += '/' + playlist_id;
        }
    } else if (method == 'myPlaylistVideoPlay') {
        url_string += 'user/'+user_id+'/playlist';
        if (contenttype) {
            url_string += '/' + contenttype;
        }
        if (playlist_id) {
            url_string += '/' + playlist_id;
        }
		url_string += '/play';
    } else if (method == 'myFollowedArtists') {
        url_string += 'user/'+user_id+'/followed-artist';
        if (page_no) {
            url_string += '/page-' + page_no;
        }
    } else if (method == 'myContinueWatching') {
        url_string += 'user/'+user_id+'/continue-watching';
        if (contenttype) {
            url_string += '/' + contenttype;
        }
        if (page_no) {
            url_string += '/page-' + page_no;
        }
    } else if (method == 'myFavourites') {
        url_string += 'user/'+user_id+'/favourites';
        if (contenttype) {
            url_string += '/' + contenttype;
        }
        if (page_no) {
            url_string += '/page-' + page_no;
        }
    } else if (method == 'user_downloads') {
        url_string += 'user/'+user_id+'/downloads';
        if (contenttype) {
            url_string += '/' + contenttype;
        }
        if (page_no) {
            url_string += '/page-' + page_no;
        }
    } else if (method == 'myWatchlist') {
        url_string += 'user/'+user_id+'/watchlist';
        if (contenttype) {
            url_string += '/' + contenttype;
        }
        if (page_no) {
            url_string += '/page-' + page_no;
        }
    }
    url_string = url_string.trim('/');
    var root_url = $('#site_url').val();

    if (root_url && url_string) {
        return_url = root_url + url_string;
    } else {
        return_url = root_url;
    }
    return return_url;
}

function threeDotsMenu(params, e1) {
    //alert('three dot called');
    $(e1).focus();
    $('#popup-dots').html('');
    $('#playlist_name').val('');

    var favourite_url = '', favourite_class = '', favourite_label = '', page_url = '', player_call = '', data = '', download_call = '', share_url = '', addtoplaylist_call = '';
    
    var fav_tracking = '' ,addtoqueue_tracking = '', addtoplaylist_tracking = '', share_tracking = '', download_tracking = ''; 
    //var loggedin_status = $('#user_ln_status').val();

    var loggedin_status = 0;
    if (hungamaGetCookie('h_profile')) {
        cookie_details = JSON.parse(hungamaGetCookie('h_profile'));
        loggedin_status = cookie_details['status'];
    }
    
    fav_tracking = "googleAnalyticsCustomTracker('event', 'Three Dots Favourite', '"+params.content_type+" - "+params .content_title+"' ,'favourite'); ";
    addtoqueue_tracking = "googleAnalyticsCustomTracker('event', 'Three Dots Add to Queue', '" +params.content_type + "- "+ params.content_title + "','add to Queue'); ";
    addtoplaylist_tracking = "googleAnalyticsCustomTracker('event', 'Three Dots Add to Playlist', '" +params.content_type + "- "+ params.content_title + "', 'add to Playlist'); ";
    
    share_tracking = "googleAnalyticsCustomTracker('event', 'Three Dots Share', '" +params.content_type + "- "+ params.content_title + "','Share'); ";
    download_tracking = "googleAnalyticsCustomTracker('event', 'Three Dots Download', '" +params.content_type + "- "+ params.content_title + "', 'Donwload'); ";

    if (loggedin_status == 1) {
        //var fav_array = JSON.parse($('#user_fav_data').val());
		
		var fav_array = '';
        var fav_arr = $("#user_fav_data").val();
		console.log(fav_arr); 
		if(fav_arr.length > 0 )     {
			var fav_array = JSON.parse($('#user_fav_data').val());  console.log("if" + fav_array); console.log('if');
		} else {
			var fav_array = ''; 
			console.log('else'); 
		}
		
        //var art_followed_array = JSON.parse($('#user_fav_data').val());
		var art_followed_array = '';
        /*if (!Array.prototype.inArray) {
         Array.prototype.inArray = function(element) {
         return this.indexOf(element) > -1;
         };
         }*/
        var p_contentid = parseInt(params.content_id);
        favourite_url = "user.addToMyFavourite({content_id:'" + p_contentid + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'});";
        // favourite_url = "user.clickTest();";
        favourite_class = "icon-ic_favourite";
        favourite_label = "Favourite";
        if (fav_array.length > 0) {
            if (jQuery.inArray(p_contentid, fav_array) != -1) {
                //if (fav_array.inArray(params.content_id)) {
                favourite_url = "user.removeFromMyFavourite({content_id:'" + p_contentid + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'});";
                //favourite_url = "user.clickTest();";
                favourite_class = "icon-ic_favourite_fill";
                favourite_label = "Unfavourite";
            } else {
                console.log("Outside if : " + p_contentid);
            }
            ;
        }
    } else {
        favourite_url = "user.addToMyFavourite({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'});";
        //favourite_url = "user.clickTest();";
        favourite_class = "icon-ic_favourite";
        favourite_label = "Favourite";
    }

    if (params.content_type == 'album') {
        addtoplaylist_call = "user.addToMyPlaylist({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'})"
        page_url = gen_music_urls({
            method: 'musicdetails',
            cnt_subtype: 'music',
            cnt_id: params.content_id,
            cnt_title: params.clean_title
        });
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
		share_url = page_url;
        player_call = "content_id:" + params.content_id + ", content_type:'album', action:'append'";
        data = '<li><a href="javascript:void(0);" onclick="'  + fav_tracking + favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>' +
                '<li><a href="javascript:void(0)" onclick=" '+addtoqueue_tracking+' audio_player.add_to_player({' + player_call + '})" title="Add to Queue"><i class="icon-ic_add_queue"></i>Add to Queue</a></li>' +
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Album" title="Share Album" shareType="image" shareTitle="' + params.content_title + '" shareDesc="' + params.content_desc + '" shareUrl="' + share_url + '"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" alt="Share Album" title="Share Album" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick=" '+share_tracking+' socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" onclick="' + addtoplaylist_tracking + addtoplaylist_call + '" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a title="View details" id="pajax_a" href="' + page_url + '"><i class="icon-ic_info"></i>View details</a></li>';
    } else if (params.content_type == 'song') {
        addtoplaylist_call = "user.addToMyPlaylist({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'})"
        page_url = gen_music_urls({method: 'musicdetails', cnt_subtype: 'song', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
		share_url = page_url;
        player_call = "content_id:" + params.content_id + ", content_type:'track', action:'append'";
        download_call = "content_id:" + params.content_id + ", content_type:'song', content_title:'" + params.content_title + "'";
        data = '<li><a href="javascript:void(0);" onclick="' + fav_tracking +  favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>' +
                '<li><a href="javascript:void(0);" onclick="'+download_tracking+' user.downloadContent({' + download_call + '})" title="Get MP3"><i class="icon-ic_mp3 mp3"></i>Get MP3</a></li>' +
                '<li><a href="javascript:void(0)" onclick="'+addtoqueue_tracking+' audio_player.add_to_player({' + player_call + '})" title="Add to Queue"><i class="icon-ic_add_queue"></i>Add to Queue</a></li>' +
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Album" title="Share Album" shareType="image" shareTitle="'+params.content_title+'" shareDesc="'+params.content_desc+'" shareUrl="'+share_url+'"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" alt="Share Song" title="Share Song" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick="'+share_tracking+' socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" onclick="' + addtoplaylist_tracking  + addtoplaylist_call + '" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a title="View details" id="pajax_a" href="' + page_url + '"><i class="icon-ic_info"></i>View details</a></li>';
    } else if (params.content_type == 'song_playlist') {
        console.log('song_playlist if ...');
        addtoplaylist_call = "user.addToMyPlaylist({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'})"
        page_url = gen_music_urls({method: 'musicdetails', cnt_subtype: 'playlists', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
		share_url = page_url;
        player_call = "content_id:" + params.content_id + ", content_type:'playlist', action:'append'";
        download_call = "content_id:" + params.content_id + ", content_type:'song', content_title:'" + params.content_title + "'";
        data = '<li><a href="javascript:void(0);" onclick="' +fav_tracking  + favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>' +
                '<li><a href="javascript:void(0)" onclick="'+addtoqueue_tracking+' audio_player.add_to_player({' + player_call + '})" title="Add to Queue"><i class="icon-ic_add_queue"></i>Add to Queue</a></li>' +
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Playlist" title="Share Playlist" shareType="image" shareTitle="'+params.content_title+'" shareDesc="'+params.content_desc+'" shareUrl="'+share_url+'"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" alt="Share Playlist" title="Share Playlist" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick="'+share_tracking+' socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" onclick="' + addtoplaylist_tracking + addtoplaylist_call + '" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a title="View details" id="pajax_a" href="' + page_url + '"><i class="icon-ic_info"></i>View details</a></li>';
	} else if(params.content_type == 'user_song_playlist') {
            console.log('user song_playlist if ...');
			page_url = params.url;
            player_call = "content_id:"+params.content_id+", content_type:'playlist', action:'add'";
			data =  '<li><a href="javascript:void(0)" onclick="'+addtoqueue_tracking+' audio_player.add_user_playlist_to_player({'+player_call+'})" title="Add to Queue"><i class="icon-ic_add_queue"></i>Add to Queue</a></li>' +
					'<li><a title="View details" id="pajax_a" href="'+page_url+'"><i class="icon-ic_info"></i>View details</a></li>';
    }
    else if (params.content_type == 'radio' || params.content_type == 'liveradio' || params.content_type == 'ondemandradio') {
        page_url = gen_music_urls({method: 'musicdetails', cnt_subtype: 'radio', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
        share_url = page_url;
        if(params.content_type =='ondemandradio'){
            data = '<li><a href="javascript:void(0);" onclick="' +fav_tracking + favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>';
        }
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Radio" title="Share Radio" shareType="radio_station" shareTitle="'+params.content_title+'" shareDesc="'+params.content_desc+'" shareImage="'+params.content_image+'" shareUrl="'+share_url+'"><i class="icon-ic_share"></i>Share</a></li>';
               data += '<li><a href="javascript:void(0)" alt="Share Radio" title="Share Radio" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick="'+share_tracking+' socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>';
    } else if (params.content_type == 'videos') {
        addtoplaylist_call = "user.addToMyPlaylist({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'})"
        page_url = createVideoListingUrl({method: 'videoDetails', cnt_id: params.content_id, cnt_title: params.clean_title,cnt_type_id:params.cnt_type_id});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
		share_url = page_url;
        download_call = "content_id:" + params.content_id + ", content_type:'video', content_title:'" + params.content_title + "'";
        data = '<li><a id="pajax_a" href="' + page_url + '" title="Play"><i class="icon-ic_play"></i>Play</a></li>' +
//                '<li><a href="javascript:void(0);" onclick="user.downloadContent({' + download_call + '})" title="Get MP4"><i class="icon-ic_mp4"></i>Get MP4</a></li>' +
                '<li><a href="javascript:void(0);" onclick="' + favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>' +
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Video" title="Share Video" shareType="video" shareTitle="'+params.content_title+'" shareDesc="'+params.content_desc+'" shareImage="'+params.content_image+'" shareUrl="'+share_url+'"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" alt="Share Video" title="Share Video" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick="socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" onclick="' + addtoplaylist_call + '" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a id="pajax_a" href="' + page_url + '" title="View details"><i class="icon-ic_info"></i>View details</a></li>';
    } else if (params.content_type == 'video_playlist') {
        page_url = createVideoListingUrl({method: 'videoPlaylistDetails', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
        share_url = page_url;
        addtoplaylist_call = "user.addToMyPlaylist({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'})"
        data = '<li><a id="pajax_a" href="' + page_url + '" title="Play"><i class="icon-ic_play"></i>Play</a></li>' +
                '<li><a href="javascript:void(0);" onclick="' + favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>' +
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Video" title="Share Video" shareType="video" shareTitle="'+params.content_title+'" shareDesc="'+params.content_desc+'" shareImage="'+params.content_image+'" shareUrl="'+share_url+'"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" alt="Share Video Playlist" title="Share Video Playlist" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick="socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>' +
                //'<li><a href="javascript:void(0)" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a href="javascript:void(0)" onclick="'+addtoplaylist_call+'" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a id="pajax_a" href="' + page_url + '" title="View details"><i class="icon-ic_info"></i>View details</a></li>';
    } else if (params.content_type == 'moviecollections') {
        page_url = gen_movie_urls({method: 'collectiondetails', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
		share_url = page_url;
        data = '<li><a id="pajax_a" href="' + page_url + '" title="Play"><i class="icon-ic_play"></i>Play</a></li>' +
                '<li><a href="javascript:void(0);" onclick="' + favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>' +
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Video" title="Share Video" shareType="video" shareTitle="'+params.content_title+'" shareDesc="'+params.content_desc+'" shareImage="'+params.content_image+'" shareUrl="'+share_url+'"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" alt="Share Movie Collection" title="Share Movie Collection" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick="socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a id="pajax_a" href="' + page_url + '" title="View details"><i class="icon-ic_info"></i>View details</a></li>';
    } else if (params.content_type == 'moviethemes') {
        page_url = gen_movie_urls({method: 'themedetails', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
        //page_url = page_url;
		share_url = page_url;
        data = '<li><a id="pajax_a" href="' + page_url + '" title="Play"><i class="icon-ic_play"></i>Play</a></li>' +
                '<li><a href="javascript:void(0);" onclick="' + favourite_url + '" title="' + favourite_label + '"><i class="' + favourite_class + '"></i>' + favourite_label + '</a></li>' +
                //'<li><a class="advShare" href="javascript:void(0)" alt="Share Video" title="Share Video" shareType="video" shareTitle="'+params.content_title+'" shareDesc="'+params.content_desc+'" shareImage="'+params.content_image+'" shareUrl="'+share_url+'"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" alt="Share Movie Themes" title="Share Movie Themes" data-share-title="' + params.content_title + '" data-share-desc="' + params.content_desc + '" data-share-id="' + params.content_id + '" data-share-image="' + params.content_image + '" data-share-url="' + share_url + '" data-share-type="' + params.content_type + '" data-share-clean-title="' + params.clean_title + '" onclick="socialShare(this)"><i class="icon-ic_share"></i>Share</a></li>' +
                '<li><a href="javascript:void(0)" title="Add to Playlist"><i class="icon-ic_add_playlist"></i>Add to Playlist</a></li>' +
                '<li><a id="pajax_a" href="' + page_url + '" title="View details"><i class="icon-ic_info"></i>View details</a></li>';
    } else if(params.content_type == 'user_video_playlist') {
            console.log('user video_playlist if ...');
			page_url = params.url;
			data = '<li><a title="View details" id="pajax_a" href="'+page_url+'"><i class="icon-ic_info"></i>View details</a></li>';
    }
    $('#popup-dots').html(data);
    threeDotsJavascript(e1);
    //threeDotsAjax();
}


function threeDotsMenu1(params) {
    var favourite_url = '', favourite_title = '', favourite_class = '', page_url = '', player_call = '', share_url = '', data = '', addtoplaylist_call = '';
    //$.ajax({
    //    type: 'POST',
    //    url: $('#site_url').val() + "user/loggedin-status",
    //    success: function (result) {
    //        var response = JSON.parse(result);

    var loggedin_status = 0;
    if (hungamaGetCookie('h_profile')) {
        cookie_details = JSON.parse(hungamaGetCookie('h_profile'));
        loggedin_status = cookie_details['status'];
    }
    //var loggedin_status = $('#user_ln_status').val();
    if (loggedin_status == 1) {
        //var fav_array = JSON.parse($('#user_fav_data').val());
		var fav_array = '';
        var art_followed_array = JSON.parse($('#user_fav_data').val());
        //if (response.status == 'yes') {
        /*if (!Array.prototype.inArray) {
         Array.prototype.inArray = function (element) {
         return this.indexOf(element) > -1;
         };
         }*/
        var p_contentid = parseInt(params.content_id);
        favourite_url = "user.addToMyFavourite({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'});";
        favourite_class = "icon-ic_favourite";
        favourite_title = "Favourite";
        //var fav_array = response.fav_data;
        if (fav_array.length > 0) {
            if (jQuery.inArray(p_contentid, fav_array) != -1) {
                //if (fav_array.inArray(params.content_id)) {
                favourite_url = "user.removeFromMyFavourite({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'});";
                favourite_class = "icon-ic_favourite_fill";
                favourite_title = "Unfavourite";
            }
        }
    } else {
        favourite_url = "user.addToMyFavourite({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'});";
        favourite_class = "icon-ic_favourite";
        favourite_title = "Favourite";
    }

    if (params.content_type == 'song') {
        addtoplaylist_call = "user.addToMyPlaylist({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'})";
        page_url = gen_music_urls({method: 'musicdetails', cnt_subtype: 'song', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
		share_url = page_url;
        player_call = "content_id:" + params.content_id + ", content_type:'track', action:'append'";
        data = '<a href="javascript:void(0);" title="' + favourite_title + '" class="' + favourite_class + '" onclick="' + favourite_url + '"style="display: inline"></a>' +
                '<a title="Add to Queue" href="javascript:void(0)" onclick="audio_player.add_to_player({' + player_call + '})" class="icon-ic_add_queue" style="display: inline"></a>' +
                '<a class="advShare icon-ic_share" href="javascript:void(0)" alt="Share Song" title="Share Song" shareType="song" shareTitle="' + params.content_title + '" shareDesc="' + params.content_desc + '" shareImage="' + params.content_image + '" shareUrl="' + share_url + '" style="display: inline"></a>' +
                '<a title="Add to Playlist" href="javascript:void(0)" onclick="' + addtoplaylist_call + '" class="icon-ic_add_playlist" style="display: inline"></a>' +
                '<a title="View Info" id="pajax_a" href="' + page_url + '" class="icon-ic_info" style="display: inline"></a>';
    } else if (params.content_type == 'song_playlist') {
        addtoplaylist_call = "user.addToMyPlaylist({content_id:'" + params.content_id + "', content_type:'" + params.content_type + "', content_title:'" + params.content_title + "'})";
        page_url = gen_music_urls({method: 'musicdetails', cnt_subtype: 'playlists', cnt_id: params.content_id, cnt_title: params.clean_title});
        //share_url = page_url.replace("http://revamp.hungama.com", "http://www.hungama.com");
		share_url = page_url;
        player_call = "content_id:" + params.content_id + ", content_type:'playlist', action:'append'";
        data = '<a href="javascript:void(0);" title="' + favourite_title + '" class="' + favourite_class + '" onclick="' + favourite_url + '" style="display: inline;"></a>' +
                '<a href="javascript:void(0)" title="Add to Queue" onclick="audio_player.add_to_player({' + player_call + '})" class="icon-ic_add_queue" style="display: inline;"></a>' +
                '<a class="advShare icon-ic_share" href="javascript:void(0)" alt="Share Playlist" title="Share Playlist" shareType="image" sharecontent="playlist" shareTitle="' + params.content_title + '" shareDesc="' + params.content_desc + '" shareImage="' + params.content_image + '" shareUrl="' + share_url + '" style="display: inline"></a>' +
                '<a href="javascript:void(0)" title="Add to Playlist" onclick="' + addtoplaylist_call + '" class="icon-ic_add_playlist" style="display: inline;"></a>' +
                '<a title="View Info" id="pajax_a" href="' + page_url + '" class="icon-ic_info" style="display: inline;"></a>';
    }
    var div_id = params.div_id;
    $('#' + div_id).html(data);
    $(".threedotshr").each(function (i) {
        if (this.id == div_id) {
            $('#' + div_id).toggle();
        } else {
            $('#' + this.id).hide();
        }
    });
    //}
    //});
}

function get_details_for_tracking(content_id, content_type) {
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + "tracking-content-details",
        data: {content_id: content_id, content_type: content_type},
        success: function (result) {
            var response = JSON.parse(result);
            var category = response.category;
            var subcategory = response.subcategory;
            var id = response.id;
            var name = response.name;
            var content_id = response.content_id;
            var content_title = response.content_title;
            var singer = response.singer;
            var language = response.language;
            var vendor = response.vendor;
            var genere = response.genere;
            var event = response.event;
            var nwurl = response.nwurl;
            var album_image = response.album_image;
            var contentfrom = response.contentfrom;
            var ipaddress = response.ipaddress;
            var user_email = '';
            var user_id = '';
            if (hungamaGetCookie('h_profile')) {
                cookie_details = JSON.parse(hungamaGetCookie('h_profile'));
                if (cookie_details['status'] == 1) {
                    user_email = cookie_details['userName'];
                    user_id = cookie_details['userId'];
                }
            }


            custom_track({category: category, subcategory: subcategory, id: id, name: name, content_id: content_id,
                content_title: content_title, singer: singer, language: language, vendor: vendor,
                genere: genere, event: event, nwurl: nwurl, contentfrom: contentfrom, ipaddress: ipaddress,
                user_id: user_id, user_email: user_email, album_image: album_image
            });
        }
    });
}

function custom_track(params) {
    if (params.category) {
        category = params.category;
    }
    if (params.subcategory) {
        subcategory = params.subcategory;
    }
    if (params.id) {
        id = params.id;
    }
    if (params.name) {
        name = params.name;
    }
    if (params.content_id) {
        content_id = params.content_id;
    }
    if (params.content_title) {
        content_title = params.content_title;
    }
    if (params.singer) {
        singer = params.singer;
    }
    if (params.language) {
        language = params.language;
    }
    if (params.vendor) {
        vendor = params.vendor;
    }
    if (params.genere) {
        genere = params.genere;
    }
    if (params.event) {
        event = params.event;
    }
    if (params.nwurl) {
        nwurl = params.nwurl;
    }
    if (params.contentfrom) {
        contentfrom = params.contentfrom;
    }
    if (params.ipaddress) {
        ipaddress = params.ipaddress;
    }
    if (params.user_email) {
        user_email = params.user_email;
    }
    if (params.user_id) {
        user_id = params.user_id;
    }

    var consumptionArray = {};
    consumptionArray["property"] = $('#track_property').val();
    consumptionArray["category"] = category;
    consumptionArray["subcategory"] = subcategory;
    consumptionArray["id"] = id;
    consumptionArray["name"] = name;
    consumptionArray["content_id"] = content_id;
    consumptionArray["content_title"] = content_title;
    consumptionArray["contentfrom"] = contentfrom;
    if (category == 'movies') {
        consumptionArray["cast"] = singer;
    } else {
        consumptionArray["singer"] = singer;
    }

    if (event == 'download') {
        consumptionArray["content_viewing"] = 'download';
        consumptionArray["event"] = 'downloaded';
    } else {
        var userplans = getCookie("uniqueplan");
        //console.log("uniq"+userplans);
        if (userplans != "") {
            consumptionArray["content_viewing"] = 'full';
        } else {
            consumptionArray["content_viewing"] = 'preview';
        }
        consumptionArray["event"] = 'not_downloaded';
    }

    consumptionArray["vendor"] = vendor;
    consumptionArray["genere"] = genere;
    consumptionArray["language"] = language;

    //consumptionArray["email"] = $("#useremail").val();
    //consumptionArray["userid"] = $("#user_id").val();

    consumptionArray["email"] = user_email;
    consumptionArray["userid"] = user_id;
    consumptionArray["url"] = window.location.host + nwurl;
    consumptionArray["ipaddress"] = ipaddress;
    var cookievalue = getCookie("_huid");
    consumptionArray["_huid"] = cookievalue;
    var finalstrings = JSON.stringify(consumptionArray);

    var trackingurl = 'http://52.70.73.115/eventTracker.js?query=' + finalstrings;
    $("#customtracking").remove();
    var fileref = document.createElement('script');
    fileref.setAttribute("type", "text/javascript");
    fileref.setAttribute("src", trackingurl);
    fileref.setAttribute("id", "customtracking");
    document.body.appendChild(fileref);



}



function user_download(content_type, start, length) {

    var data = 'content_type=' + content_type + '&start=' + start + '&length=' + length;
    $('#p_loading').html('<div class="loading">Loading...</div>');
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'index.php?c=user&m=user_downloads',
        data: data,
        success: function (response) {
            var dwn_arr = JSON.parse(response);
            var is_dwn = dwn_arr.download_list;
            var content_type = dwn_arr.content_type;
            $('#p_loading').html('');
            if (content_type == 'music') {
                $('#tab1').html(is_dwn);
            } else {
                $('#tab1').show();
                $('#tab1').html(is_dwn);
            }
        }
    });
}
function user_fav(content_type) {
    var data = 'contenttype=' + content_type;
    $('#p_loading').html('<div class="loading">Loading...</div>');
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'index.php?c=user&m=myFavourites',
        data: data,
        success: function (response) {
            $('#p_loading').html('');
            $("#wrapper").html(response);
        }
    });
}
function user_playlist() {
    $('#p_loading').html('<div class="loading">Loading...</div>');
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'user/user-playlist',
        success: function (response) {
            $('#p_loading').html('');
            $("#wrapper").html(response);
        }
    });
}
function user_followed_artist() {
    $('#p_loading').html('<div class="loading">Loading...</div>');
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'user/my-followed-artist',
        success: function (response) {
            $('#p_loading').html('');
            $("#wrapper").html(response);
        }
    });
}
function user_watchlist() {
    $('#p_loading').html('<div class="loading">Loading...</div>');
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'user/my-watchlist',
        success: function (response) {
            $('#p_loading').html('');
            $("#wrapper").html(response);
        }
    });
}
function user_continue_watching() {
    $('#p_loading').html('<div class="loading">Loading...</div>');
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'user/my-continue-watching',
        success: function (response) {
            $('#p_loading').html('');
            $("#wrapper").html(response);
        }
    });
}
function bdg_pop_close() {
    $('#bdg-pop').removeClass('show');
}

function badge_pop() {

}

function user_action_point(gigya_action, content_id, type) {//call for gigya user actions

    var data = "";
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'index.php?c=user&m=user_action&gigya_action=' + gigya_action + '&content_id=' + content_id + '&type=' + type,
        data: data,
        success: function (response) {
            var bdg_arr = JSON.parse(response);
            $('#bdg-pop').remove();

            var is_badge = bdg_arr.response['badge_earned'];
            if (is_badge == 0) {
                var is_points = bdg_arr.response['points_earned'];
                console.log("poinyd" + is_points);
                if (is_points > 0) {
                    $('.bdg-pop').remove();
                    console.log('point earn');
                   
				   /*var bdg_pop = '<div id="bdg-pop"><a href="#" class="icon-ic_cancel clearfix" onclick="bdg_pop_close();"></a><div class="badge-img"></div><div class="cont clearfix"><div class="info">You Have Earned</div><p>You just earned ' + bdg_arr.response['points_earned'] + ' Points <span> Level ' + bdg_arr.response['level'] + '</span></p></div></div>';*/
                    
					var bdg_pop = '<div class="bdg-pop"><div class="badge-bg">You have<br>Earned<br><i class="icon-ic_coins-69"></i><br><span>'+bdg_arr.response['points_earned']+'</span></div><div class="cont clearfix1"><div class="close"><a href="#" class="icon-ic_cancel_1-11" onclick="bdg_pop2_close()"></a></div><div class="info">'+bdg_arr.response['message']+'</div><p>'+bdg_arr.response['next_description']+'<br>' + bdg_arr.response['next_level'] + '</p></div></div>';
					$('body').append(bdg_pop);
                    if ($('.bdg-pop').length > 0) {
                        setTimeout(function () {
                            $('.bdg-pop').addClass('show')
                        }, 500);
                        setTimeout(function () {
                            $('.bdg-pop').removeClass('show')
                        }, 5000);
                    }
					
                }

            } else {
                setTimeout(function () {
                    $('#bdg-pop').remove();
                    var bdg_pop = '<div id="bdg-pop"><a href="javascript:void(0);" class="icon-ic_cancel clearfix" onclick="bdg_pop_close();"></a><div class="badge-img"><img src="' + bdg_arr.response['badge_data']['badge_url'] + '" alt="' + bdg_arr.response['next_level'] + '"></div><div class="cont clearfix"><div class="info">You Just Levelled</div><p>You just reached Level ' + bdg_arr.response['level'] + ' as <span>' + bdg_arr.response['next_level'] + '</span></p></div></div>';
                    console.log('badge earn' + bdg_pop);
                    $('body').append(bdg_pop);
                    if ($('#bdg-pop').length > 0) {
                        setTimeout(function () {
                            $('#bdg-pop').addClass('show')
                        }, 500);
                        setTimeout(function () {
                            $('#bdg-pop').removeClass('show')
                        }, 4500);
                    }
                }, 1000);

                setTimeout(function () {
                    $('#bdg-pop1').remove();
                    var bdg_pop1 = '<div id="bdg-pop1"><a href="javascript:void(0);" class="icon-ic_cancel clearfix" onclick="bdg_pop1_close();"></a><div class="badge-img"><img src="' + bdg_arr.response['badge_data']['badge_url'] + '" alt="' + bdg_arr.response['next_level'] + '"></div><div class="cont clearfix"><div class="info"> New Badge Unlocked </div><p>You just unlocked <span>' + bdg_arr.response['badge_data']['badge'] + '</span></p><p> Level ' + bdg_arr.response['level'] + '</p></div></div>';
                    $('body').append(bdg_pop1);
                    console.log('badge earn' + bdg_pop1);
                    if ($('#bdg-pop1').length > 0) {
                        setTimeout(function () {
                            $('#bdg-pop1').addClass('show')
                        }, 500);
                        setTimeout(function () {
                            $('#bdg-pop1').removeClass('show')
                        }, 5000);
                    }
                }, 5000);



            }

            setTimeout(function () {
                if ($("span#my_user_coint")) {
                    $('span#my_user_coint').html(bdg_arr.response['total_points']);
                }
                else {
                }
            }, 1000);

        }
    });
}


function movieFlip() {
    $(".movie-block-artist").on('click', '.info', function () {
        if ($(this).parent().parent().find('.artistmovieover').hasClass('flip')) {
            $(this).parent().parent().find('.artistmovieover').removeClass('flip');
        } else {
            $('.movie-block-artist').find('.artistmovieover').removeClass('flip');
            $(this).parent().parent().find('.artistmovieover').addClass('flip');
        }
        return false;
    });

    $(document).on('mouseleave', ".movie-block-artist", function () {
        $(this).children('.artistmovieover').fadeOut(500).removeClass('flip');
        $(this).children('.movieblock_artwork').fadeIn(500).removeClass('flip1');
    });

    $(".movie-close").click(function () {
        $(this).parent('.artistmovieover').removeClass('flip');
        return false;
    });
}

function showLoginPopup() {
    //$('#user-login, .showBg').show();
    $('body').addClass('fixed');
    if ($('.overlay_wrapper').is(":visible")) {
        $('.overlay_wrapper').hide();
    }
    $('.showBg').show();
    $('#email-exist').hide();
    $('#login-signup').hide().removeClass("bounceIn animated");
    $('#login-signin').show();
    //.center();

    a = $('#login-signin').height() / 2;
    $('#login-signin').css('margin-top', -a);

    $("#login-signin .field input").each(function () {
        if ($(this).val() == '') {
            $(this).next().removeClass('hasvalue');
        } else {
            $(this).next().addClass('hasvalue');
        }
    });


}

function showLoginFailedPopup() {
    $('.showBg').show();
    $('#email-exist').hide();
    $('#login-signup').hide();
    $('#login-failed').show();
    $('#login-signin').hide();
}

function closeLoginFailedPopup() {
    var page = window.location.href;
    console.log(page.indexOf('user-login'));
    if (page.indexOf('user-login') == '-1') {
        $('.showBg').show();
        $('#email-exist').hide();
        $('#login-failed').hide();
        $('#login-signup').hide();
        $('#login-signin').show();
    } else {
        $('.showBg').hide();
        $('#p_loading').html('');
    }
}

function showSignUpPopup() {
    $('body').addClass('fixed');
    $('.showBg').show();
    $('#email-exist').hide();
    $('#login-signin').hide();
    $('#login-signup').show();

    $("#login-signup .field input").each(function () {
        if ($(this).val() == '') {
            $(this).next().removeClass('hasvalue');
        } else {
            $(this).next().addClass('hasvalue');
        }
    });

    a = $('#login-signup').height() / 2;
    $('#login-signup').css('margin-top', -a);
}

function showForgotPassPopup() {
    $('body').addClass('fixed');
    $('.showBg').show();
    $('#email-exist').hide();
    $('#login-signin').hide();
	$('#loginPop').hide();
    $('#login-signup').hide();
    $('#forgot-pass-error').empty();
    $('#forgot-pass-msg').empty();
    $('#forgot-pass-signup, .forgot-pass-again, .forgot-pass-contact').hide();
    $('#forgot-pass-frm, .forgot-pass-submit').show();
    $('#forgot-pass').show();

    $("#forgot-pass input").each(function () {
        if ($(this).val() == '') {
            $(this).next().removeClass('hasvalue');
        } else {
            $(this).next().addClass('hasvalue');
        }
    });

    a = $('#forgot-pass').height() / 2;
    $('#forgot-pass').css('margin-top', -a);
}

function loginTextShowHide() {
    var rurl = '';
    var loggedin_status = 0;
    if (hungamaGetCookie('h_profile')) {
        cookie_details = JSON.parse(hungamaGetCookie('h_profile'));
        loggedin_status = cookie_details['status'];
    }

    if (loggedin_status == 1) {
		$(".user-login, #signup-text").hide();
        $("#logged-text").show();
    } else {
		var page = window.location.href;
        var lurl = $('#site_url').val() + 'user-login';

        if (page.indexOf('user-login') == '-1') {
            var refurl = encodeURIComponent(page);
            var rurl = lurl + '?r=' + refurl;
        } else {
            var rurl = page;
        }

        console.log(refurl);
        console.log(lurl);
        console.log(rurl);
        //$('.user-login').attr('href', rurl);
        //$('.mob-login').attr('href', rurl);
        $(".user-login, #signup-text").show();
        $("#logged-text").hide();
    }
    showMyAccountLinks();

    if (rurl.length > 0) {
        //$('.mob-login').attr('href', rurl);
    }
}

function checkLoggedInStatus() {
	$.ajax({
        type: 'POST',
        url: $('#origin_url').val() + "user/loggedin-status",
        success: function (result) {
            var response = JSON.parse(result);
            if (response.status == 'yes') {
                console.log("yes");
                $('#user_fav_data').val(response.fav_data);
                $('#user_watchlist_data').val(response.watchlist_data);
                $('#user_artist_followed_data').val(response.artist_followed_data);
                $('#user_notify_me').val(response.user_notifyme);

                var index, content_id;
                var a = response.watchlist_data;
                for (index = 0; index < a.length; ++index) {
                    content_id = a[index];
                    if ($("#movie_id_" + content_id).length) {
                        $("#movie_id_" + content_id).removeClass('icon-ic_watchlist_add');
                        $("#movie_id_" + content_id).addClass('icon-ic_watchlist');
                    }
                    console.log("consum length : " + $("#movie_consumption_" + content_id).length);
                    if ($("#movie_consumption_" + content_id).length) {
                        $("#movie_consumption_" + content_id).removeClass('icon-ic_watchlist_add');
                        $("#movie_consumption_" + content_id).addClass('icon-ic_watchlist');
                    }
                }

                var j, artist_id;
                var b = response.artist_followed_data;
                for (j = 0; j < b.length; ++j) {
                    artist_id = b[j];
                    if ($("#artist_id_" + artist_id).length) {
                        console.log("artist_id_" + artist_id + '   --- element exists');
                        //$("#artist_id_" + artist_id).removeClass('icon-ic_fallow');
                        //$("#artist_id_" + artist_id).addClass('icon-ic_following');
                        $("[id=artist_id_" + artist_id+"]").removeClass('icon-ic_fallow');
                        $("[id=artist_id_" + artist_id+"]").addClass('icon-ic_following');


                    }
                    if ($("#artist_consumption_" + artist_id).length) {
                        $("#artist_consumption_" + artist_id).removeClass('icon-ic_fallow');
                        $("#artist_consumption_" + artist_id).addClass('icon-ic_following');
                    }

                }
                
                var k ,fav_id;
                var user_fav = response.fav_data;
                console.log("user_fav : " +user_fav);
                user_fav = user_fav.replace(/[^0-9,]/g,'');
                /*user_fav= user_fav.replace('"',"");
                user_fav= user_fav.replace('[',"");
                user_fav= user_fav.replace(']',"");*/
                var fav_array = user_fav.split(',');
                for (k = 0; k < fav_array.length; ++k) {
                    fav_id = fav_array[k];           
                    if (fav_id > 0) {
                        $("#fav_consumption_" + fav_id).removeClass('icon-ic_favourite');
                        $("#fav_consumption_" + fav_id).addClass('icon-ic_favourite_fill');
                        //$(".jw_favourite .icon-ic_favourite_1-46").addClass("actfev");
                        
                    }
                }
                /*
                var k ,fav_id;
                var c = response.fav_data;
                
                console.log('c value: '+c+ 'Fav. Length : '+c.length); 
                for (k = 0; k < c.length; ++k) {
                    fav_id = c[k];           
                    if (fav_id > 0) {
                        console.log('Fav Consumption_' + fav_id + '   :: favourite consumption element exists');
                        $("#fav_consumption_" + fav_id).removeClass('icon-ic_favourite');
                        $("#fav_consumption_" + fav_id).addClass('icon-ic_favourite_fill');
                        $(".jw_favourite .icon-ic_favourite_1-46").addClass("actfev");
                    }
                }
                */

                notifyme_data = $('#user_notify_me').val();
                arrNotifyData = notifyme_data.split(',');
                for (i = 0; i < arrNotifyData.length; ++i) {
                    if ($("#notifyme_" + arrNotifyData[i]).length) {
                        $("#notifyme_" + arrNotifyData[i]).hide();
                        $("#un_notifyme_" + arrNotifyData[i]).show();
                    }
                }
                loginTextShowHide();
				if(!hungamaGetCookie('_haff')){setAffiliate();}
            } else {
                console.log("no");
                $('#user_fav_data').val(response.fav_data);
                $('#user_watchlist_data').val(response.watchlist_data);
                $('#user_artist_followed_data').val(response.artist_followed_data);
                loginTextShowHide();
            }
        }
    });
}

function getUserConsumption(category) {
    console.log('getUserConsumption Called..');
    var user_fav = $('#user_fav_data').val();
    var user_watchlist = $('#user_watchlist_data').val();
    var user_artist = $('#user_artist_followed_data').val();
    var user_notify = $('#user_notify_me').val();
    console.log("watchlist : " +user_watchlist); 
    var index, content_id;
    if (category == 'home' || category == 'movie_home' || category == 'movie_dtl' || category == 'tvshow_home' || category == 'tvshow_dtls' || category == 'more_movies' || category == 'more_tvshow' || category == 'artist_dtl' || category=='continuewatching') {
        var a = user_watchlist;
        var str_array = user_watchlist.split(',');

        for (index = 0; index < str_array.length; ++index) {
            content_id = str_array[index];
            if ($("#movie_id_" + content_id).length) {
                $("#movie_id_" + content_id).removeClass('icon-ic_watchlist_add');
                $("#movie_id_" + content_id).addClass('icon-ic_watchlist');
                console.log("#movie_id_" + content_id);
            }
            console.log("consum length :: " + $("#movie_consumption_" + content_id).length);
            if ($("#movie_consumption_" + content_id).length) {
                $("#movie_consumption_" + content_id).removeClass('icon-ic_watchlist_add');
                $("#movie_consumption_" + content_id).addClass('icon-ic_watchlist');
            }
             if ($("#movie_continue_watchlist_" + content_id).length) {
                $("#movie_continue_watchlist_" + content_id).removeClass('icon-ic_watchlist_add');
                $("#movie_continue_watchlist_" + content_id).addClass('icon-ic_watchlist');
            }
        }
    }
    if (category == 'home' || category == 'movie_dtl' || category == 'artist_home' || category == 'more_artists' || category == 'artist_dtl') {
        var j, artist_id;
        var b = user_artist;
        var artist_array = user_artist.split(',');
        for (j = 0; j < artist_array.length; ++j) {
            artist_id = artist_array[j];
            if ($("#artist_id_" + artist_id).length) {
                console.log("Artist_id_" + artist_id + '   --- element exists');
                //$("#artist_id_" + artist_id).removeClass('icon-ic_fallow');
                //$("#artist_id_" + artist_id).addClass('icon-ic_following');
				$("[id=artist_id_" + artist_id+"]").removeClass('icon-ic_fallow');
                $("[id=artist_id_" + artist_id+"]").addClass('icon-ic_following');
            }
            if ($("#artist_consumption_" + artist_id).length) {
                $("#artist_consumption_" + artist_id).removeClass('icon-ic_fallow');
                $("#artist_consumption_" + artist_id).addClass('icon-ic_following');
            }
        }
    }
    
     if (category == 'home' || category == 'song_dtl' || category == 'album_dtl' || category == 'radio_dtl' || category == 'movie_dtl' || category == 'video_playlist_queue' || category == 'video_dtl' || category == 'artist_dtl' || category == 'playlist_dtl' || category == 'video_playlist_details') {
		// Remove Favourite Selection in Audio Player
		$('[id^="hap_"]').removeClass('player_fav_item').removeClass('icon-ic_favourite_fill');
		
		var k ,fav_id;
        var b = user_fav;
        user_fav = user_fav.replace(/[^0-9,]/g,'');
        /*user_fav = user_fav.replace(/[":{}]/g,'');
        user_fav= user_fav.replace('"',"");
        user_fav= user_fav.replace('[',"");
        user_fav= user_fav.replace(']',"");*/
        var fav_array = user_fav.split(',');
        for (k = 0; k < fav_array.length; ++k) {
            fav_id = fav_array[k];           
            if (fav_id > 0) {
                $("#fav_consumption_" + fav_id).removeClass('icon-ic_favourite');
                $("#fav_consumption_" + fav_id).addClass('icon-ic_favourite_fill');
				$('#hap_'+fav_id).addClass('player_fav_item').addClass('icon-ic_favourite_fill');
            }
        }
    }

    notifyme_data = $('#user_notify_me').val();
    arrNotifyData = notifyme_data.split(',');
    for (i = 0; i < arrNotifyData.length; ++i) {
        if ($("#notifyme_" + arrNotifyData[i]).length) {
            $("#notifyme_" + arrNotifyData[i]).hide();
            $("#un_notifyme_" + arrNotifyData[i]).show();
        }
    }
}

function setUserConsumption(category, content_id, action) { 
    console.log('setUserConsumption');
    var user_notify = $('#user_notify_me').val();
    if (action == 'add') {
        if (category == 'home' || category == 'movie_home' || category == 'movie_dtl' || category == 'tvshow_home' || category == 'tvshow_dtls' || category == 'more_movies' || category == 'more_tvshow' || category == 'artist_dtl' || category=='continuewatching') {
            var user_watchlist = $('#user_watchlist_data').val();
            console.log('setUserCon : '+user_watchlist);
            user_watchlist_arr = user_watchlist.split(",");
            user_watchlist_arr.push(content_id);
            var user_watchlist_str = user_watchlist_arr.toString();
            $('#user_watchlist_data').val(user_watchlist_str);
        }
        if (category == 'home' || category == 'movie_dtl' || category == 'artist_home' || category == 'more_artists' || category == 'artist_dtl') {
            var user_artist = $('#user_artist_followed_data').val();
            user_artist_arr = user_artist.split(",");
            user_artist_arr.push(content_id);
            var user_artist_str = user_artist_arr.toString();
            $('#user_artist_followed_data').val(user_artist_str);
        }
        if (category == 'home' || category == 'song_dtl' || category == 'album_dtl' || category == 'radio_dtl' || category == 'movie_dtl' || category == 'video_playlist_queue' || category == 'video_dtl' || category == 'artist_dtl' || category == 'video_playlist_details') {
            var user_fav = $('#user_fav_data').val();
            user_fav = user_fav.replace(/[^0-9,]/g,'');
            /*user_fav= user_fav.replace(']',"");
            user_fav= user_fav.replace('[',"");
            user_fav= user_fav.replace('"',"");*/
            
            user_fav_arr = user_fav.split(",");
            user_fav_arr.push(content_id);
            var user_fav_str = user_fav_arr.toString();
            console.log('arr : ' +user_fav_arr);
            console.log($('#user_fav_data').val(user_fav_str)); 
            console.log("Push : " + user_fav_arr.push(content_id));
            $('#user_fav_data').val(user_fav_str);
            
        }

    }
    if (action == 'remove') {
        if (category == 'home' || category == 'movie_home' || category == 'movie_dtl' || category == 'tvshow_home' || category == 'tvshow_dtls' || category == 'more_movies' || category == 'more_tvshow' || category == 'artist_dtl') {
            var user_watchlist = $('#user_watchlist_data').val();
            user_watchlist_arr = user_watchlist.split(",");
            user_watchlist_arr.splice($.inArray(content_id, user_watchlist_arr), 1);
            var user_watchlist_str = user_watchlist_arr.join();
            $('#user_watchlist_data').val(user_watchlist_str);
        }
        if (category == 'home' || category == 'movie_dtl' || category == 'artist_home' || category == 'more_artists' || category == 'artist_dtl') {
            var user_artist = $('#user_artist_followed_data').val();
            user_artist_arr = user_artist.split(",");
            user_artist_arr.splice($.inArray(content_id, user_artist_arr), 1);
            var user_artist_str = user_artist_arr.join();
            $('#user_artist_followed_data').val(user_artist_str);
        }
        if (category == 'home' || category == 'song_dtl' || category == 'album_dtl' || category == 'radio_dtl' || category == 'movie_dtl' || category == 'video_playlist_queue' || category == 'video_dtl' || category == 'artist_dtl' || category == 'playlist_dtl') {
            var user_fav = $('#user_fav_data').val();
            user_fav = user_fav.replace(/[^0-9,]/g,'');
            
            /*user_fav= user_fav.replace(']',"");
            user_fav= user_fav.replace('[',"");
            user_fav= user_fav.replace('"',"");*/
            user_fav_arr = user_fav.split(",");
            user_fav_arr.splice($.inArray(content_id, user_fav_arr), 1);
            var user_fav_str = user_fav_arr.join();
            $('#user_fav_data').val(user_fav_str);
        }
    }
    var category = $("#category").val();
    if(category != ''){
        getUserConsumption(category); 
    }
}


function redirectToPay(billing, platform, plan_id, content_id, pay_id) {
    if (hungamaGetCookie('h_profile')) {
        cookie_details = JSON.parse(hungamaGetCookie('h_profile'));
        if (cookie_details['status'] == 1) {
            if (billing != "" && platform != "")
            {
				console.log("rt_url"+window.location.href);
				var rt_url=window.location.href;
                window.location = $('#origin_url').val() + "pay/?billing=" + billing + "&platform=" + platform + "&plan_id=" + plan_id + "&content_id=" + content_id + "&pay_id=" + pay_id+"&rt_url="+encodeURIComponent(rt_url);
            }

        } else {
            $('#user_action').val('my-subs');
            $('#user_bil').val(billing);
            $('#user_pt').val(platform);
            $('#user_select_pi').val(plan_id);
            $('#content_id').val(content_id);
            $('#user_pid').val(pay_id);
            showLoginPopup();
        }

    } else {
        $('#user_action').val('my-subs');
        $('#user_bil').val(billing);
        $('#user_pt').val(platform);
        $('#user_select_pi').val(plan_id);
        $('#content_id').val(content_id);
        $('#user_pid').val(pay_id);

        showLoginPopup();

    }
}


$(document).on('click', "#email-exist-cancel", function () {
    $("#email-exist, .showBg").hide();
});


function lhsMenuActive() {
    $('#menu').find('a').each(function (index) {
        $(this).removeClass('active');
    });

	$('#headermenu').find('a').each(function (index) {
        $(this).removeClass('active');
    });

    if (($("#page").val() == 'home') || ($("#menu_page").val() == 'home')) {
        $('.home_clk').addClass("active");
    } else if (($("#page").val() == 'music') || ($("#menu_page").val() == 'music')) {
        $('.music_clk').addClass("active");
    } else if (($("#page").val() == 'movies') || ($("#menu_page").val() == 'movies')) {
        $('.movie_clk').addClass("active");
    } else if (($("#page").val() == 'videos') || ($("#menu_page").val() == 'videos')) {
        $('.video_clk').addClass("active");
    } else if (($("#page").val() == 'artist') || ($("#menu_page").val() == 'artist')) {
        $('.artist_clk').addClass("active");
    } else if (($("#page").val() == 'tvshow') || ($("#menu_page").val() == 'tvshow')) {
        $('.tvshow_clk').addClass("active");
    } else if ($("#page").val() == 'comingsoon') {
        $('.comingsoon_clk').addClass("active");
    } else if (($("#page").val() == 'kids') || ($("#menu_page").val() == 'kids')) {
        $('.kids_clk').addClass("active");
    } else if (($("#page").val() == 'liveshow') || ($("#menu_page").val() == 'liveshow')) {
        $('.liveshow_clk').addClass("active");
    } else {
        $('.home_clk').addClass("active");
    }
}

function changeAjaxCallUrl(page_url) {
    str_replace = 'stgrevamp.hungama.com';
    new_page_url = '';
    if (page_url.indexOf('stgrevamp.hungama.com/us') >= 0) {
        new_page_url = page_url.replace('stgrevamp.hungama.com/us', str_replace);
    } else if (page_url.indexOf('stgrevamp.hungama.com/lk') >= 0) {
        new_page_url = page_url.replace('revamp.hungama.com/lk', str_replace);
    } else if (page_url.indexOf('stgrevamp.hungama.com/uk') >= 0) {
        new_page_url = page_url.replace('stgrevamp.hungama.com/uk', str_replace);
    } else {
        new_page_url = page_url;
    }
    return new_page_url;
}
function collectionrentbutton(params) {
    var cnt_id = params.id;
    var cnt_type = params.cnt_type;
    var dis_price = params.discount_price;
    var data = 'content_id='+cnt_id+ '&cnt_type=' + cnt_type + '&dis_price=' + dis_price;
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'index.php?c=user&m=checkcollectionstatus',
        data: data,
        success: function (response) {
            var plan_status_arr = JSON.parse(response);
            if (plan_status_arr['rent'] != "") {
                $("#rentplanbutton").html(plan_status_arr.rent);
				$(window).trigger('resize');
            }
        }
    });
}

function subbutton(params) {
    var movierights = params.rights;
    var cnt_type = params.cnt_type;
    var content_id=params.id;
    var data = 'movie_rights=' + movierights + '&cnt_type=' + cnt_type+'&content_id='+content_id;
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'index.php?c=user&m=checkplanstatus',
        data: data,
        success: function (response) {
            var plan_status_arr = JSON.parse(response);
            if (plan_status_arr['sub'] != "") {
                $("#subsplanbutton").html(plan_status_arr.sub);
				$(window).trigger('resize');
            }
            if (plan_status_arr['play_flag'] == 1) {
                console.log("fulltime");
                $('#viewtm').val(500);
				$('#watch_time').val(plan_status_arr['watch_time']);
            }
			$("#moviethumplay").attr("onclick", "playMovie({id: " + content_id + ",viewtime: 1,cnt_type:'tvshow'})");
        }
    });

}

function movierightsbutton(params) {
    var movierights = params.rights;
    var cnt_id = params.id;
    var cnt_type = params.cnt_type;
    var lang = params.language;

    var data = 'content_id=' + cnt_id + '&movie_rights=' + movierights + '&lang=' + lang + '&cnt_type=' + cnt_type;
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'index.php?c=user&m=checkplanstatus',
        data: data,
        success: function (response) {
            var plan_status_arr = JSON.parse(response);
            if (plan_status_arr['rent'] != "") {
                $("#rentplanbutton").html(plan_status_arr.rent);
				$(window).trigger('resize');
            }
            if (plan_status_arr['sub'] != "") {
                $("#subsplanbutton").html(plan_status_arr.sub);
				$(window).trigger('resize');
            }
            if (plan_status_arr['play_flag'] == 1) {
                $("#playmovieevent").attr("onclick", "playMovie({id: " + cnt_id + ",viewtime: 1,cnt_type:'"+cnt_type+"'})");
				$("#moviethumplay").attr("onclick", "playMovie({id: " + cnt_id + ",viewtime: 1,cnt_type:'"+cnt_type+"'})");
                $('#viewtm').val(500);
				  console.log('movierights_viewtime');
				if(videoConfigObj_1){
				   console.log('movierights_viewtime_1');
				   player1Obj.config.extraParam.viewingTime = 200;
				}
				$('#watch_time').val(plan_status_arr['watch_time']);
            }else{
				var movieright=$('#movie_rights').val();
				$("#moviethumplay").attr("onclick", "playMovie({id: " + cnt_id + ",cnt_type:'"+cnt_type+"',right:'"+movieright+"'})");
			}
        }
    });
}

function redeem_sub(platform, gigay_coins, plan_detail_id,content_id) {
    if (hungamaGetCookie('h_profile')) {
        cookie_details = JSON.parse(hungamaGetCookie('h_profile'));
        if (cookie_details['status'] == 1) {
            if (content_type != "")
            {

                $('#com_hd').html('Redeem Your Coins');
                $('#com_msg').html('You have ' + gigay_coins + ' points.<br> Are you sure you want to Redeem points?');
                $('#com_yes').attr('data-plan', plan_detail_id);
                $('#com_yes').attr('data-platform', platform);
				$('#com_yes').attr('data-content_id', content_id);
                $('#com_yes').attr('data-pay_type', 'redeem');
                $('#com_yes').attr('data-src', 'player');
                $('#common_msg, .showBg').show();
                var a = $('#common_msg').height() / 2;
                $('#common_msg').css('margin-top', -a);

            }

        } else {
            $('#user_action').val('my-plans');
            showLoginPopup();
        }

    } else {
        $('#user_action').val('my-plans');
        showLoginPopup();
    }
}


function redeem_dwn(src_from, plan, platform, content_id, content_type, content_title) {
    console.log('down');
    $("#redeem_btn_dwn").attr('onclick', '');
    $('#p_loading').html('<div class="loading">Loading...</div>');
    $('#getmp3').hide();
    console.log('down2');
    var data = plan;
    $.ajax({
        type: 'POST',
        url: $('#origin_url').val() + 'index.php?c=pay&m=redeem_dwn&plan=' + plan + '&platform=' + platform + '&content_id=' + content_id + '&content_type=' + content_type,
        data: data,
        success: function (response) {
            var response = JSON.parse(response);
            if (response.status == 'done') {
                data = response.file_path;
                if (data != '' && data != null) {

                    $('.showBg').hide();
                    $('#p_loading').html('');

                    //call to gigya user actions for download
                    user_action_point('downloaded', content_id, content_type);
					
					jw_ga_params = {'contenttype':content_type, 'content_title': content_title, 'content_id': content_id};
                    jw_events('download', jw_ga_params);
					
                    get_details_for_tracking(content_id, content_type);
                    var successHtml = content_title + ' downloaded successfully';
                    window.open(data, "_parent", '', '');

                    $('#profile-success-msg').html(successHtml);
                    //show popup
                    showSubdwnpopup('music', data);
                    $('.showBg, #profile-success').show(0).delay(3000).hide(0);

                } else {
                    //showPopup("", "Sorry, download file not available for this video");
                    $('#profile-success-msg').html('Sorry, download file not available for this video!!');
                    $('.showBg, #profile-success').show(0).delay(3000).hide(0);

                }
            }
        }
    });

}

function hidemenu() {
    $('#menu').animate({"left": "-200vw"}, "fast");
    $('#menu').removeClass('showMenu showMenu1');
    $('.menu-icon a.lines-button').removeClass('active');
    $('.searchlens').show();
}

/*added to center popup*/
$.fn.center = function () {
    this.css("position", "fixed");
    this.addClass("animated bounceIn");
    this.css("top", ($(window).height() / 2 - this.height() / 2) + "px");
    this.css("left", ($(window).width() / 2 - this.width() / 2) + "px");
    return this;
}

function resetLoginForm() {
    console.log('resetLoginForm');
    $("#user_action").val();
    $("#user_msg").val();
    $("#content_id").val();
    $("#content_title").val();
    $("#movie_rating").val();
    $('#user_bil').val();
    $('#user_pt').val();
    $('#user_select_pi').val();
    $('#user_pid').val();
}

function pjaxLoadURL(url) {
    console.log('pjaxLoadURL : ' + url);
    $.pjax({
        url: url,
        type: "GET",
        container: '#wrapper',
        timeout: 20000,
    });
}

function messageShowpopup(message) {
    if (message != '') {
        $('#messageShowpopup_content').html(message);
        setTimeout(function () {
            $('#messageShowpopup, .showBg').show()
        }, 500);
        setTimeout(function () {
            $('#messageShowpopup, .showBg').hide();
            $('#p_loading').html(''); 
        }, 5000);
    }

}

function siteURLShare(id, type) {
    $('.showBg').show();

    var origin_url = $('#origin_url').val();

    var sharedetails = origin_url + 'index.php?c=common&m=share';
    dataToSend = {
        'id': id,
        'type': type
    };

    $.ajax({
        type: 'POST',
        url: $socialLoginUrl,
        data: $dataToSend,
        success: function (response) {
            console.log(response);
            obj = JSON.parse(response);

            if (obj.id != '' && obj.title != '' && obj.url != '') {

                $('#social_share_thumb').html('<img src="' + obj.img + '" width="50" height="50" alt="' + obj.title + '">');
                $('#social_share_title').html(obj.title);
                $('#social_share_subtitle').html(obj.title);
                $('#social_share_link').html(obj.url);
                $('#social_share_hid').val(obj.url);

                var act = new gigya.socialize.UserAction();

                act.setTitle(obj.title);  // Setting the Title
                act.setLinkBack(obj.url);  // Setting the Link Back
                act.setDescription(obj.title);   // Setting Description
                act.addActionLink("Read More", obj.url);

                var params = {
                    userAction: act,
                    shareButtons: [
                        {
                            provider: 'facebook',
                            tooltip: 'Share on Facebook',
                            iconImgUp: 'http://revamp.hungama.com/assets/images/login-iconfb.png'
                        },
                        {
                            provider: 'googleplus',
                            tooltip: 'Share on Google+',
                            iconImgUp: 'http://revamp.hungama.com/assets/images/login-icongplus.png'
                        },
                        {
                            provider: 'twitter',
                            tooltip: 'Share on Twitter',
                            iconImgUp: 'http://revamp.hungama.com/assets/images/twitter-icon.png'
                        }
                    ],
                    showCounts: 'none',
                    iconsOnly: true,
                    onSendDone: function (e) {
                        console.log('Shared');
                    },
                    containerID: 'social_share_icons'
                }
                gigya.socialize.showShareBarUI(params);

                $('#social-share').show();
                a = $('#social-share').height() / 2;
                $('#social-share').css('margin-top', -a);

            }
        }
    });
}

function copyURL() {
    // Select the content
    document.querySelector("#social_share_hid").select();
    // Copy to the clipboard
    document.execCommand('copy');
}

function socialShare(e) {
    $('.showBg').show();
	
	if (navigator.userAgent.match(/ipad|ipod|iphone/i)) {
		$('#copy-link').hide();
	}
    
    title = $(e).attr('data-share-title');
    url = $(e).attr('data-share-url');
    desc = $(e).attr('data-share-desc');
    id = $(e).attr('data-share-id');
    img = $(e).attr('data-share-image');
    type = $(e).attr('data-share-type');
    clean_title = $(e).attr('data-share-clean-title');
    var contents_type = type;
	
	switch (type) {
		case "video":
		case "videos":
			//url = $('#site_url').val()+'videos/song-'+clean_title+'/'+id;
             //url = $('#site_url').val()+'video/' + clean_title + '/' + id + '/';
                        contents_type = 'Videos';
			break;
		case "song":
		case "track":
//			url = $('#site_url').val()+'music/song-'+clean_title+'/'+id+'/play';
                        //url = $('#site_url').val()+'song/' + clean_title + '/' + id + '/';
			break;
		case "album":
//			url = $('#site_url').val()+'music/album-'+clean_title+'-songs/'+id+'/play';
                        url = $('#site_url').val()+'album/' + clean_title + '/' + id + '/';
			break;
		case "playlist":
		case "song_playlist":
//			url = $('#site_url').val()+'music/playlists/'+clean_title+'-'+id+'/play';
                        url =  $('#site_url').val()+'playlists/' + clean_title + '/' + id + '/';
                        contents_type = 'Song playlist';
			break;
                        case "video_playlist": 
                        contents_type = 'Video playlist';
                        url = $('#site_url').val()+'video-playlist/' + clean_title + '/' + id + '/';
                        break;
                    case "ondemandradio": 
                        contents_type = 'Ondemand radio';
                        url =  $('#site_url').val()+'radio/' + clean_title + '/' + id + '/';
                        break;
                    case "radio": 
                        contents_type = 'Radio';
                        //url =  $('#site_url').val()+'live-radio/' + clean_title + '/' + id + '/';
                        break;
                    case "movie": 
                        contents_type = 'Movie';
                        break;
                    case "tvshow": 
                        contents_type = 'TV show';
                        break;
                    case "tvepisode": 
                        contents_type = 'Latest Episode';
                        break;
                    case "theme": 
                        contents_type = 'Theme';
                        break;
                    case "collection": 
                        contents_type = 'Collection';
                        break;
	}
	
	console.log(id+'|'+title+'|'+url+'|'+img);

    if (id != '' && title != '' && url != '') {

        $('#social_share_thumb').html('<img src="' + img + '" width="50" height="50" alt="' + title + '">');
        $('#social_share_title').html(title);
        $('#social_share_subtitle').html(title);
        $('#social_share_link').html(url);
        $('#social_share_hid').val(url);

        /*var act = new gigya.socialize.UserAction();

        act.setTitle(title);  // Setting the Title
        act.setLinkBack(url);  // Setting the Link Back
        act.setDescription(desc);   // Setting Description
        act.addActionLink("Read More", url);

        var params = {
            userAction: act,
            shareButtons: [
                {
                    provider: 'facebook',
                    tooltip: 'Share on Facebook',
                    iconImgUp: 'http://revamp.hungama.com/assets/images/login-iconfb.png'
                },
                {
                    provider: 'googleplus',
                    tooltip: 'Share on Google+',
                    iconImgUp: 'http://revamp.hungama.com/assets/images/login-icongplus.png'
                },
				{ 
					provider:'twitter',
					tooltip:'Share on Twitter',
					iconImgUp:'http://revamp.hungama.com/assets/images/login-icontwitter.png'
				}
            ],
            showCounts: 'none',
            iconsOnly: true,
            onSendDone: function (e) {
                console.log('Shared');
                $('.showBg').hide();
                $('#social-share').hide();
                $('#badge').hide();
            },
            containerID: 'social_share_icons'
        }
        gigya.socialize.showShareBarUI(params);
		*/
		
		encodeURL = encodeURIComponent(url);
                var msg = "Check out this "+contents_type+" , "+url+" : "+title + ". Get the app on www.hungama.com/apps/ now.";               
                var whatsapp_url = "whatsapp://send?text=" + msg;
                var whatsapp_link = '';
                if (isMobile.any()) { 
                    var whatsapp_link ='<a style="cursor: pointer;margin-left:2px" href="whatsapp://send?text=' + msg+'" ><img src="'+$('#site_url').val()+'/assets/images/whatsup_icon.png" data-text="'+title+'" data-link="'+url+'"></a>'; 
                } 
		var links = '<!-- Facebook -->'+
					'<a href="https://www.facebook.com/sharer/sharer.php?u='+encodeURL+'" onclick="javascript:window.open(this.href, \'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600\');onShareDone();return false;"><img src="http://stat1.hungama.ind.in/assets/images/login-iconfb.png" alt="Share on Facebook"></a>'+
					'<!-- Google Plus -->'+
					'<a href="https://plus.google.com/share?url='+encodeURL+'" onclick="javascript:window.open(this.href, \'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600\');onShareDone();return false;"><img src="http://stat1.hungama.ind.in/assets/images/login-icongplus.png" alt="Share on Google+"></a>'+
					'<!-- Twitter -->'+
					'<a href="http://www.twitter.com/share?url='+encodeURL+'&text='+encodeURIComponent(title)+'" onclick="javascript:window.open(this.href, \'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600\');onShareDone();return false;"><img src="http://stat1.hungama.ind.in/assets/images/login-icontwitter.png" alt="Share on Twitter"></a>' + whatsapp_link;
					
        $('#social_share_icons').html(links);
		
        $('#social-share').show();
        a = $('#social-share').height() / 2;
        $('#social-share').css('margin-top', -a);
    }
}

function onShareDone(){
	user_action_point('share',1,'music');
	$('.showBg').hide();
	$('#social-share').hide();
	$('#badge').hide();
}

function cancel(id) {
    $('.showBg').hide();
    $('#' + id).hide();
}

function showEmailExistPopup() {
    $('.showBg').show();
    a = $('#email-exist').height() / 2;
    $('#email-exist').css('margin-top', -a);
    $('#email-exist').show();
}

function openSignUpPopup() {
    $('.showBg, #forgot-pass').hide();
    showRegisterPopupLarge();
    //pjaxLoadURL($('#site_url').val()+'user-signup');
}

function dotMenus(params, e) {
	$(e).focus();
    $('#popup-dots1').html('');
	$('#popup-dots2').html('');
    $('#playlist_name').val('');

    if(params.content_type == 'song_playlist') {
		
		call_moveTop='listItem.moveToTop('+params.content_id+', \'music\');';
		call_moveBottom='listItem.moveToBottom('+params.content_id+', \'music\');';
		call_moveUp='listItem.moveToUp('+params.content_id+', \'music\');';
		call_moveDown='listItem.moveToDown('+params.content_id+', \'music\');';
		call_setPlaylistArtwork='setPlaylistArtwork('+params.content_id+', \'music\');';
		call_removeTrackFromPlaylist='removeTrackFromPlaylist('+params.playlist_id+', '+params.content_id+');';
		
		data = '<li><a href="javascript:void(0)" title="Move to Top" onclick="'+call_moveTop+'">Move to Top</a></li>'+
				'<li><a href="javascript:void(0)" title="Move One Up" onclick="'+call_moveUp+'">Move One Up</a></li>'+
				'<li><a href="javascript:void(0)" title="Move One Down" onclick="'+call_moveDown+'">Move One Down</a></li>'+
				'<li><a href="javascript:void(0)" title="Move to Bottom" onclick="'+call_moveBottom+'">Move to Bottom</a></li>'+
				'<li><a href="javascript:void(0)" title="Set as Thumbnail" onclick="'+call_setPlaylistArtwork+'">Set as Thumbnail</a></li>'+
				'<li><a href="javascript:void(0)" title="Delete from Playlist" onclick="'+call_removeTrackFromPlaylist+'">Delete from Playlist</a></li>';
				
		$('#popup-dots2').html(data);
		
		loadPlaylistTrackMenu(e, 'songplaylist_wrapper', 'popup-dots2');
		
    } else if(params.content_type == 'video_playlist') {
		
		call_moveTop='listItem.moveToTop('+params.content_id+', \'video\');';
		call_moveBottom='listItem.moveToBottom('+params.content_id+', \'video\');';
		call_moveUp='listItem.moveToUp('+params.content_id+', \'video\');';
		call_moveDown='listItem.moveToDown('+params.content_id+', \'video\');';
		call_setPlaylistArtwork='setPlaylistArtwork('+params.content_id+', \'video\');';
		call_removeTrackFromPlaylist='removeTrackFromPlaylist('+params.playlist_id+', '+params.content_id+');';
		
		data = '<li><a href="javascript:void(0)" title="Move to Top" onclick="'+call_moveTop+'">Move to Top</a></li>'+
				'<li><a href="javascript:void(0)" title="Move One Up" onclick="'+call_moveUp+'">Move One Up</a></li>'+
				'<li><a href="javascript:void(0)" title="Move One Down" onclick="'+call_moveDown+'">Move One Down</a></li>'+
				'<li><a href="javascript:void(0)" title="Move to Bottom" onclick="'+call_moveBottom+'">Move to Bottom</a></li>'+
				'<li><a href="javascript:void(0)" title="Set as Thumbnail" onclick="'+call_setPlaylistArtwork+'">Set as Thumbnail</a></li>'+
				'<li><a href="javascript:void(0)" title="Delete from Playlist" onclick="'+call_removeTrackFromPlaylist+'">Delete from Playlist</a></li>';
		
		$('#popup-dots1').html(data);
		
		loadPlaylistTrackMenu(e, 'vdoplaylist_wrapper', 'popup-dots1');
    }
}

var listItem = {
	moveToTop: function(trackid, type){
		var id = $('.pl_tracks').attr('data-id');
		var array = new Array;
		$('.pl_tracks').find('.pl_track').each(function(){
			array.push(parseInt($(this).attr('data-track-id')));
		});
		
		var i = parseInt(array.indexOf(trackid));
		
		var tracks = this.moveArrayElement(array, trackid, (-1*i));
		
		setPlaylistOrder(id, tracks, type);
		
		$('.pl_tracks').fadeOut('slow',function(){
			$('.pl_tracks').prepend($('#plt'+trackid)).fadeIn('slow');;
		});
	},
	moveToBottom: function(trackid, type){
		var id = $('.pl_tracks').attr('data-id');
		var array = new Array;
		$('.pl_tracks').find('.pl_track').each(function(){
			array.push(parseInt($(this).attr('data-track-id')));
		});

		var l = parseInt(array.length);
		
		var tracks = this.moveArrayElement(array, trackid, l);
		
		setPlaylistOrder(id, tracks, type);
		
		$('.pl_tracks').fadeOut('slow',function(){
			$('.pl_tracks').append($('#plt'+trackid)).fadeIn('slow');;
		});
	},
	moveToUp: function(trackid, type){
		var id = $('.pl_tracks').attr('data-id');
		var array = new Array;
		$('.pl_tracks').find('.pl_track').each(function(){
			array.push(parseInt($(this).attr('data-track-id')));
		});
		
		var tracks = this.moveArrayElement(array, trackid, -1);
		
		setPlaylistOrder(id, tracks, type);
		
		var $div = $('#plt'+trackid);
		
		if ($div.index() > 0){
			$div.fadeOut('slow',function(){
				$div.insertBefore($div.prev()).fadeIn('slow');
			});
		}
	},
	moveToDown: function(trackid, type){
		var id = $('.pl_tracks').attr('data-id');
		var array = new Array;
		$('.pl_tracks').find('.pl_track').each(function(){
			array.push(parseInt($(this).attr('data-track-id')));
		});
		
		var tracks = this.moveArrayElement(array, trackid, 1);
		
		setPlaylistOrder(id, tracks, type);
		
		var $div = $('#plt'+trackid);
		
		if ($div.index() <= ($div.siblings().length - 1)){
			$div.fadeOut('slow',function(){
				$div.insertAfter($div.next()).fadeIn('slow');
			});
		}
	},
	moveArrayElement: function(array, value, newPosition){
		var oldKey = array.indexOf(value);
		if (oldKey > -1){
			var newKey = (oldKey + newPosition);

			if (newKey < 0){
				newKey = 0;
			}else if (newKey >= array.length){
				newKey = array.length;
			}
			newArray = array.slice();
			newArray.splice(oldKey,1);
			newArray.splice(newKey,0,value);
			return newArray;
		}
		return array;
	}
}

function setPlaylistOrder(id, tracks, type){
	console.log(tracks);
	$.ajax({
		type: 'POST',
		url: $('#origin_url').val()+'index.php?c=user&m=playlist_order',
		data: {'id':id, 'tracks':tracks, 'type':type},
		success: function (result) {
			//console.log(result);
		}
	});
}

function setPlaylistArtwork(trackid, type){
	var id = $('.pl_tracks').attr('data-id');
	var artwork = $('#plt'+trackid).attr('data-track-artwork');
	//console.log(artwork);
	$.ajax({
		type: 'POST',
		url: $('#origin_url').val()+'index.php?c=user&m=playlist_artwork',
		data: {'id':id, 'artwork':artwork, 'type':type},
		success: function (result) {
			if(type == 'music'){
				var i = 1;
				$('#pl_thumb img').each( function(){
					if(i>=2){
						$(this).remove();
					}
					i++;
				});
				$('#pl_thumb img').parent().parent().removeClass('image-block').addClass('albumDetails');
			}
			$('#pl_thumb img').attr('src', artwork);
			//console.log(result);
		}
	});
}

function loadBanner(banner){
	console.log(banner);
	setTimeout(
		function(){console.log('banner loaded');
			if($('#smartbanner').length == 0){
				$.smartbanner({
					title: banner.title,
					author: banner.author,
					icon: banner.icon,
					button: 'Open',
					daysHidden: 0,
					daysReminder: 0,
					url: banner.url
				});
			}else{
				$('.sb-icon').css('background-image', 'url('+banner.icon+')');
				$('.sb-button').attr('onclick', 'window.location=\''+banner.url+'\'');
				$('#sb-title').html(banner.title);
				$('#sb-auther').html(banner.author);
				if($('#smartbanner').css('display') == 'none'){
					$('body').addClass('sb-android');
					$('#smartbanner').css('top', '0px').show();
				}
			}
	}, 1000);
}

var isMobile = { 
	Android: function() { 
		return navigator.userAgent.match(/Android/i);
	}, 
	BlackBerry: function() { 
		return navigator.userAgent.match(/BlackBerry/i); 
	}, 
	iOS: function() { 
		return navigator.userAgent.match(/iPhone|iPad|iPod/i); 
	}, 
	Opera: function() { 
		return navigator.userAgent.match(/Opera Mini/i); 
	}, 
	Windows: function() { 
		return navigator.userAgent.match(/IEMobile/i); 
	},
	any: function() { 
		return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows()); 
	}
};

var loadTag = {
	script: function(file){
		var tag=document.createElement('script');
		tag.type='text/javascript';
		tag.src=file;
		tag.onload = function(){
			console.log('script is ready!');
		}
		document.head.appendChild(tag);
	},
	link: function(file){
		var tag=document.createElement('link');
		tag.rel='stylesheet';
		tag.type='text/css';
		tag.href=file;
		tag.onload = function(){
			console.log('link is ready!');
		}
		document.head.appendChild(tag);
	},
	meta: function(name, content){
		var tag=document.createElement('meta');
		tag.name=name;
		tag.content=content;
		tag.onload = function(){
			console.log('meta is ready!');
		}
		document.head.appendChild(tag);
	}
};

function loadSmartBanner(){
	
	if(isMobile.Android()) {
		var smartCSS = 'http://stat1.hungama.ind.in/assets/css/jquery.smartbanner.css?v=0.2';
		var smartJS = 'http://stat1.hungama.ind.in/assets/js/jquery.smartbanner.js?v=0.2';
		
		//console.log($('link[href="'+smartCSS+'"]').length);
		//console.log($('script[src="'+smartJS+'"]').length);
		//Load CSS
		if($('link[href="'+smartCSS+'"]').length == 0){
			loadTag.link(smartCSS);
		}
		
		//Load JS
		if($('script[src="'+smartJS+'"]').length == 0){
			loadTag.script(smartJS);
		}
		
		setTimeout(
			function(){
				var isMusicPage = false;
				var isMoviePage = false;
				
				var page = $('#page').val();
				var category = $('#category').val();
				
				var musicPages = ['home', 'music_home', 'album_dtl', 'song_dtl', 'playlist_dtl', 'video_home', 'video_playlist_details', 'artist_dtl', 'video_dtl'];
				var moviePages = ['movie_home', 'collection_dtl', 'theme_dtl', 'movie_dtl', 'tvshow_home', 'tvshow_dtls', 'tvepisode_dtls', 'kidshome'];
				
				if(musicPages.indexOf(category) >= 0){
					isMusicPage = true;
				}

				if(moviePages.indexOf(category) >= 0){
					isMoviePage = true;
				}
				
				console.log(category);
				console.log(isMusicPage);
				console.log(isMoviePage);
				if(isMusicPage || isMoviePage){
					var title = '';
					var author = '';
					var icon = '';
					//var url = window.location.href;
					var url = '';

					/*if($('link[id="alternate_url_id"]').length == 0){
						$('link[id="alternate_url_id"]').attr('href');
					} */
					
					var app = {'music':{'title': 'Hungama Music - Songs & Videos', 'author':'Hungama Digital Media Entertainment Pvt. Ltd.', 'icon': 'http://stat1.hungama.ind.in/assets/images/hungamaMusicIco1.png', 'appleitunesapp':'app-id=414009038', 'googleplayapp':'app-id=com.hungama.myplay.activity'},
							'movie':{'title': 'Hungama Play: Movies, TV, Kids', 'author':'Hungama Digital Media Entertainment Pvt. Ltd.', 'icon': 'http://stat1.hungama.ind.in/assets/images/hungamaPlayIco.png', 'appleitunesapp':'app-id=959839618', 'googleplayapp':'app-id=com.hungama.movies'}
								};
					
					if(isMusicPage){
						var title = app.music.title;
						var author = app.music.author;
						var icon = app.music.icon;
						//page_url = window.location.href;
						//url = page_url.replace('http://', 'android-app://com.hungama.myplay.activity/http/');

						/* if($('link[id="alternate_url_id"]').length > 0) {
							url = $('link[id="alternate_url_id"]').attr('href');
						} else {
							url = 'android-app://com.hungama.myplay.activity/http/www.hungama.com/music/';
						}
						url = url + '?utm_source=smartbanner&utm_medium=mobilewebbanner'; */
						url = 'https://ad.apsalar.com/api/v1/ad?re=0&st=849134072391&h=7118c196c251aace745fc42df8f9bef8e5385a99';
				
						if($('meta[name="apple-itunes-app"]').length == 0){
							loadTag.meta('apple-itunes-app', app.music.appleitunesapp);
						}else{
							$('meta[name="apple-itunes-app"]').attr('content', app.music.appleitunesapp);
						}
						
						if($('meta[name="google-play-app"]').length == 0){
							loadTag.meta('google-play-app', app.music.googleplayapp);
						}else{
							$('meta[name="google-play-app"]').attr('content', app.music.googleplayapp);
						}
						
					} else if(isMoviePage){
						var title = app.movie.title;
						var author = app.movie.author;
						var icon = app.movie.icon;
						/* if($('link[id="alternate_url_id"]').length > 0) {
							url = $('link[id="alternate_url_id"]').attr('href');
						} else {
							url = 'android-app://com.hungama.movies/http/wsopen.hungama.com/share/movies';
						}
						url = url + '?utm_source=smartbanner&utm_medium=mobilewebbanner'; */
						url = 'https://ad.apsalar.com/api/v1/ad?re=0&st=850007531154&h=6f42881bcfc56c45284699bedc291cd15e01461d';
						
						if($('meta[name="apple-itunes-app"]').length == 0){
							loadTag.meta('apple-itunes-app', app.movie.appleitunesapp);
						}else{
							$('meta[name="apple-itunes-app"]').attr('content', app.movie.appleitunesapp);
						}
						
						if($('meta[name="google-play-app"]').length == 0){
							loadTag.meta('google-play-app', app.movie.googleplayapp);
						}else{
							$('meta[name="google-play-app"]').attr('content', app.movie.googleplayapp);
						}
					}
					
					if( title != '' && author != '' && icon != '' && url != '' ){
						var banner = {'title': title, 'author':author, 'icon': icon, 'url': url};
						//console.log(banner);
						if(banner){
							//Load Banner
							loadBanner(banner);
							console.log('loadBanner');
						}
					}
				}
				
				if(!isMusicPage && !isMoviePage){
					$('body').removeClass('sb-android');
					$('#smartbanner').hide();
				}
		}, 200);
	}
}

function hideSmartBanner() {
	$('body').removeClass('sb-android');
	$('#smartbanner').hide();
}

function loadPlaylistTrackMenu(e, wrapper, popup_dots){
	var $popup1 = $('#'+popup_dots);
	me = $(e);
	
	if ($('.'+wrapper).css('display') == 'block' && $(e).hasClass('prevTarget')) {
		console.log('cond 1'+wrapper+popup_dots);
		$('.prevTarget').removeClass('prevTarget');
		$('.'+wrapper).hide();
		//$popup.hide();
	} else if ($('.'+wrapper).css('display') == 'block' && !$(e).hasClass('prevTarget')) {
		console.log('cond 2'+wrapper+popup_dots);
		$('.prevTarget').removeClass('prevTarget');
		$(e).addClass('prevTarget');
		$('.'+wrapper).show();
		$popup1.show();
		$popup1.css({top: 0, left: 0});
		if ($(document).width() > 1024) {		//for desktop
			var calculator = new $.PositionCalculator({
				item: $popup1,
				itemAt: "bottom right",
				target: e,
				targetAt: "top right",
				flip: "both"
			});
			var posResult = calculator.calculate();
			//console.log(posResult);

			var scrollTop = $(document).scrollTop();
			var elementOffset = $(e).offset().top;
			var distance = (elementOffset - scrollTop);
			var topHeight = (posResult.moveBy.y - 8);
			var topWidth = (posResult.moveBy.x + 25);
			$popup1.css({
				top: topHeight + "px",
				left: topWidth + "px",
				position: "absolute"
			});
			if (parseInt(me.offset().top) < parseInt($('#'+popup_dots).css('top')) + 50) {
				//console.log('asd');
				$('.dropdown').addClass('arrow');
			} else {
				//console.log('123');
				$('.dropdown').removeClass('arrow');
			}
		} else {		//for mobile, tablets
			var pop_height = $('#'+popup_dots).height() / 2;

			$popup1.css({
				top: "50%",
				left: "50%",
				position: "fixed",
				"margin-left": "-75px",
				"margin-top": "-" + pop_height + "px"
			});
			$('.popup_boverlay').show();
		}
		$popup1.show();
	} else if ($('.'+wrapper).css('display') == 'none') {
		console.log('cond 3'+wrapper+popup_dots);
		$('.prevTarget').removeClass('prevTarget');
		$(e).addClass('prevTarget');
		$('.'+wrapper).show();
		$popup1.show();
		$popup1.css({top: 0, left: 0});
		
		if ($(document).width() > 1024) {		//for desktop
			var calculator = new $.PositionCalculator({
				item: $popup1,
				itemAt: "bottom right",
				target: e,
				targetAt: "top right",
				flip: "both"
			});
			var posResult = calculator.calculate();
			console.log(posResult);

			var scrollTop = $(document).scrollTop();
			var elementOffset = $(e).offset().top;
			var distance = (elementOffset - scrollTop);
			var topHeight = (posResult.moveBy.y - 8);
			var topWidth = (posResult.moveBy.x + 25);
			$popup1.css({
				top: topHeight + "px",
				left: topWidth + "px",
				position: "absolute"
			});
			if (parseInt(me.offset().top) < parseInt($('#'+popup_dots).css('top')) + 50) {
				console.log('asd'+wrapper+popup_dots);
				$('.dropdown').addClass('arrow');
			} else {
				console.log('123'+wrapper+popup_dots);
				$('.dropdown').removeClass('arrow');
			}
		} else {		//for mobile, tablets
			var pop_height = $('#'+popup_dots).height() / 2;

			$popup1.css({
				top: "50%",
				left: "50%",
				position: "fixed",
				"margin-left": "-75px",
				"margin-top": "-" + pop_height + "px"
			});
			$('.popup_boverlay').show();
		}
		$popup1.show();
		$('.'+wrapper).show();
	}
	return false;
}

function showLoginPopupLarge() {
    $('body').addClass('fixed');
    if ($('.overlay_wrapper').is(":visible")) {
        $('.overlay_wrapper').hide();
    }
    $('.showBg').show();
    $('#email-exist').hide();
    $('#login-signup, #registerPop').hide().removeClass("bounceIn animated");
    $('#loginPop').show();

    $("#loginPop .field input").each(function () {
        if ($(this).val() == '') {
            $(this).next().removeClass('hasvalue');
        } else {
            $(this).next().addClass('hasvalue');
        }
    });
}

$('#login-failed-cancel').click(function () {
    $('#login-failed').hide();
});

$('.frgPass').click(function () {
    showForgotPassPopup();
});

$('.forgot-pass-contact').click(function () {
    $('.showBg, #forgot-pass').hide();
});

function showRegisterPopupLarge() {
    $('body').addClass('fixed');
    if ($('.overlay_wrapper').is(":visible")) {
        $('.overlay_wrapper').hide();
    }
    $('.showBg').show();
    $('#email-exist').hide();
    $('#login-signin, #loginPop').hide().removeClass("bounceIn animated");
    $('#registerPop').show();

    $("#registerPop .field input").each(function () {
        if ($(this).val() == '') {
            $(this).next().removeClass('hasvalue');
        } else {
            $(this).next().addClass('hasvalue');
        }
    });
}


function show_hide_ap(val) {
    if (val == 'show')
    {
       if(albumData[song_index].id_migration!=1)
		$('.ha_player').removeClass("hide_audioPlayer");
    } else {
		$('.ha_player').addClass("hide_audioPlayer");
    }
}

function getUserInfo() {
	
	var user_values = readCookie('h_profile');
	var dec_user_values = decodeURIComponent(user_values);
	var userId='';
	var userPlan='';
	var userName='';
	uobj = JSON.parse(dec_user_values);
	if(uobj != null) {
		if(uobj.userId != null) {
			userId = uobj.userId;
		}
		if(uobj.userName!= null) {
			userName = uobj.userName;
		}
		if(uobj.user_plan != null) {
			userPlan = uobj.user_plan;
		}
	}
	var aff_values=readCookie('_haff');
	if(aff_values==null){
		aff_values='hungama_web';
	}
	return {'userId':userId,'userName':userName,'userPlan':userPlan,'affiliate':aff_values};
}

function addLink() {
	//Get the selected text and append the extra info
	var selection = window.getSelection(),
		pagelink = '<br /> View more at: ' + document.location.href,
		copytext = selection + pagelink,
		newdiv = document.createElement('div');

	//hide the newly created container
	newdiv.style.position = 'absolute';
	newdiv.style.left = '-99999px';

	//insert the container, fill it with the extended text, and define the new selection
	document.body.appendChild(newdiv);
	newdiv.innerHTML = copytext;
	selection.selectAllChildren(newdiv);

	window.setTimeout(function () {
		document.body.removeChild(newdiv);
	}, 100);
}

function setAffiliate(){
	console.log('setAffiliate');
	$.ajax({
		type: 'POST',
		url: $('#origin_url').val()+'index.php?c=user&m=setAffiliate',
		success: function (result) {
			//console.log(result);
		}
	});
}

function bannerClickAction() {
	var user_values = readCookie('h_profile');
	var dec_user_values = decodeURIComponent(user_values);
	uobj = JSON.parse(dec_user_values);
	var logged_in_status = 0;
	if(uobj != null) {
		logged_in_status = uobj.status;
	}
	console.log('logged_in_status == '+logged_in_status);
	if(logged_in_status == 1) {
		if(uobj.user_plan.music_plan_status == 1){
			popup_message =  'You are already subscribed. You can download your favourite songs & videos.';
			messageShowpopup(popup_message);
		} else {
			redirectToPay('subscription','music',3,0,4);
		}
	} else {
		redirectToPay('subscription','music',3,0,4);
	}
}

function bannerShowHide() {
	var user_values1 = readCookie('h_profile');
	var dec_user_values1 = decodeURIComponent(user_values1);
	uobj = JSON.parse(dec_user_values1);
	var logged_in_status1 = 0;
	if(uobj != null) {
		logged_in_status1 = uobj.status;
	}
	if(logged_in_status1 == 1) {
		if(uobj.user_plan.music_plan_status == 1){
			$('#div_click_banner').hide();
		} else {
			$('#div_click_banner').show();
		}
	} else {
		$('#div_click_banner').show();
	}
}

function show_preloader(){
	/* var s = screen_now_size();
	margin_right = (s['width']-100)/2;

	var state_layer = document.getElementById("page_preloader");
	state_layer.style.right      = margin_right+"px"
	document.getElementById("page_preloader").style.display = "block";
	*/

	document.getElementById("myProgress").style.display = "block";
	var elem = document.getElementById("myBar");   
	var width = 1;
	progressid = setInterval(frame, Math.floor((Math.random() * 40) + 10));
	function frame() {
		if (width ==98) {
			clearInterval(progressid);
		} else {
			width++; 
			if(width<=98){
				elem.style.width = width + '%'; 
			}
		}
	}
}

function hide_preloader() {
	//document.getElementById("page_preloader").style.display = "none";

	clearInterval(progressid);
	var elem = document.getElementById("myBar"); 
	elem.style.width = '100' + '%'; 	 
	document.getElementById("myProgress").style.display = "none";
}

$(document).on('click', ".micro-audioPlaylist-carousal .owl-next", function () {
   var cat=$('#category').val();
   if(cat=='home'){
    googleAnalyticsCustomTracker('event','playlist_scroll_next','click','home');
   }
});

$(document).on('click', ".micro-audioPlaylist-carousal .owl-prev", function () {
   var cat=$('#category').val();
   if(cat=='home'){
   googleAnalyticsCustomTracker('event','playlist_scroll_prev','click','home');
   }
   
});

function screen_now_size(){ 
	var a=new Array();
	if(typeof document.compatMode!='undefined'&&document.compatMode!='BackCompat'){
	  a["width"]=document.documentElement.clientWidth;
	  a["height"]=document.documentElement.scrollTop+document.body.clientHeight;
	}else{
	  a["width"]=document.body.clientWidth;
	  a["height"]=document.body.scrollTop+document.documentElement.clientHeight;
	  }
	return a;
}
$(function () {
    var $gallery = $('.media-gallery-block a').simpleLightbox({
    widthRatio: 0.9,
    heightRatio: 0.9,
    closeText: '',
    navText: ['', ''],
    });
});

function getFBComments(){
	$('.fb_comments').html('');
	$('.fbCommentBox').hide();
	var category = $("#category").val();
	var url = document.URL;  
	if (category == 'song_dtl' || category == 'album_dtl' || category == 'playlist_dtl' || category == 'liveradio_dtl' || category == 'video_dtl' || category == 'video_playlist_queue' || category == 'movie_dtl' || category == 'collection_dtl' || category == 'theme_dtl'  || category == 'tvshow_dtls' || category == 'tvepisode_dtls' || category == 'artist_dtl' || category == 'song_lyrics') { 
		console.log("  ::" +category); 
		$('#fb_comments').attr('data-href',url);
		$('#fb_comments').attr('data-width','100%');
		$('#fb_comments').attr('data-numposts',3);     
		setTimeout(function(){
			FB.XFBML.parse();
			$('.fbCommentBox').show();
			},1500);
		
	}
}